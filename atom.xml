<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>左之右</title>
  
  <subtitle>SamLai&#39;Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zuoyoulai.github.io/"/>
  <updated>2020-01-29T16:21:03.084Z</updated>
  <id>https://zuoyoulai.github.io/</id>
  
  <author>
    <name>[object Object]</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>java 操作 Es 的 CURD 操作</title>
    <link href="https://zuoyoulai.github.io/2020/01/30/java-es/"/>
    <id>https://zuoyoulai.github.io/2020/01/30/java-es/</id>
    <published>2020-01-29T16:17:10.000Z</published>
    <updated>2020-01-29T16:21:03.084Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="java-cao-zuo-es-de-curd-cao-zuo">java 操作 Es 的 CURD 操作</span><a href="#java-cao-zuo-es-de-curd-cao-zuo" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#maven-yin-ru">maven 引入</a></li></ul><!-- tocstop --></div><h3><span id="maven-yin-ru">maven 引入</span><a href="#maven-yin-ru" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">            &lt;es.version&gt;6.4.2&lt;&#x2F;es.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;org.elasticsearch&#x2F;elasticsearch --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.elasticsearch&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;elasticsearch&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;es.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;org.elasticsearch.client&#x2F;transport --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.elasticsearch.client&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;transport&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;es.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.elasticsearch&lt;&#x2F;groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;elasticsearch&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;&#x2F;exclusion&gt;</span><br><span class="line">            &lt;&#x2F;exclusions&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#96;&#96;&#96; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Java 代码 CURD</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ 参考文章 :  https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;a584848da515</span><br><span class="line"></span><br><span class="line">+ 验证数据 :  http:&#x2F;&#x2F;localhost:5601&#x2F;app&#x2F;kibana#&#x2F;dev_tools&#x2F;console?_g&#x3D;()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">package com.demo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.google.common.collect.Maps;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line">import org.elasticsearch.action.admin.indices.delete.DeleteIndexResponse;</span><br><span class="line">import org.elasticsearch.action.admin.indices.exists.indices.IndicesExistsRequest;</span><br><span class="line">import org.elasticsearch.action.admin.indices.exists.indices.IndicesExistsResponse;</span><br><span class="line">import org.elasticsearch.action.delete.DeleteResponse;</span><br><span class="line">import org.elasticsearch.action.get.GetRequestBuilder;</span><br><span class="line">import org.elasticsearch.action.get.GetResponse;</span><br><span class="line">import org.elasticsearch.action.index.IndexResponse;</span><br><span class="line">import org.elasticsearch.action.search.SearchRequestBuilder;</span><br><span class="line">import org.elasticsearch.action.search.SearchResponse;</span><br><span class="line">import org.elasticsearch.action.search.SearchType;</span><br><span class="line">import org.elasticsearch.action.update.UpdateRequest;</span><br><span class="line">import org.elasticsearch.action.update.UpdateResponse;</span><br><span class="line">import org.elasticsearch.client.transport.TransportClient;</span><br><span class="line">import org.elasticsearch.common.settings.Settings;</span><br><span class="line">import org.elasticsearch.common.text.Text;</span><br><span class="line">import org.elasticsearch.common.transport.TransportAddress;</span><br><span class="line">import org.elasticsearch.index.query.QueryBuilder;</span><br><span class="line">import org.elasticsearch.index.query.QueryBuilders;</span><br><span class="line">import org.elasticsearch.search.SearchHit;</span><br><span class="line">import org.elasticsearch.search.fetch.subphase.highlight.HighlightBuilder;</span><br><span class="line">import org.elasticsearch.search.fetch.subphase.highlight.HighlightField;</span><br><span class="line">import org.elasticsearch.search.sort.SortOrder;</span><br><span class="line">import org.elasticsearch.transport.client.PreBuiltTransportClient;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import java.net.InetAddress;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.concurrent.ExecutionException;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 参考文章:</span><br><span class="line"> *  https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;a584848da515</span><br><span class="line"> *</span><br><span class="line"> * es 服务:</span><br><span class="line"> *  http:&#x2F;&#x2F;localhost:9200&#x2F;</span><br><span class="line"> *  来查看 :  cluster.name</span><br><span class="line"> *</span><br><span class="line"> * kibana 服务:</span><br><span class="line"> *  http:&#x2F;&#x2F;localhost:5601&#x2F;app&#x2F;kibana#&#x2F;dev_tools&#x2F;console?_g&#x3D;()</span><br><span class="line"> *  来验证数据是否正确</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">public class CurdTest &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    TransportClient transportClient &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private final static String hostName &#x3D; &quot;localhost&quot;;</span><br><span class="line">    private final static Integer port &#x3D; 9300;</span><br><span class="line">    private final static Integer poolSize &#x3D; 5;</span><br><span class="line"></span><br><span class="line">    private final static String index &#x3D; &quot;db-1&quot;;</span><br><span class="line">    private final static String type &#x3D; &quot;tab-1&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void init() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F; 配置信息</span><br><span class="line">            Settings esSetting &#x3D; Settings.builder()</span><br><span class="line">                    .put(&quot;cluster.name&quot;, &quot;docker-cluster&quot;) &#x2F;&#x2F;集群名字</span><br><span class="line">&#x2F;&#x2F;                    .put(&quot;client.transport.sniff&quot;, true)&#x2F;&#x2F;增加嗅探机制，找到ES集群</span><br><span class="line">                    .put(&quot;thread_pool.search.size&quot;, poolSize)&#x2F;&#x2F;增加线程池个数，暂时设为5</span><br><span class="line">                    .build();</span><br><span class="line">            &#x2F;&#x2F;配置信息Settings自定义</span><br><span class="line">            transportClient &#x3D; new PreBuiltTransportClient(esSetting);</span><br><span class="line">            TransportAddress transportAddress &#x3D; new TransportAddress(InetAddress.getByName(hostName), port);</span><br><span class="line">            transportClient.addTransportAddresses(transportAddress);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            log.error(&quot;elasticsearch TransportClient create error!!&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     *  新增操作</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void oneInsert() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String data &#x3D; &quot;&#123;\n&quot; +</span><br><span class="line">                &quot;  \&quot;cn-name\&quot;:\&quot;java 赖\&quot;,\n&quot; +</span><br><span class="line">                &quot;  \&quot;en-name\&quot;:\&quot;java es lai\&quot;,\n&quot; +</span><br><span class="line">                &quot;  \&quot;age\&quot;:28,\n&quot; +</span><br><span class="line">                &quot;  \&quot;content\&quot;:\&quot;code 操作....\&quot;\n&quot; +</span><br><span class="line">                &quot;&#125;&quot;;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;这个版本需要把 json 字符串转为 map 对象  不然会报错</span><br><span class="line"></span><br><span class="line">        Map map &#x3D; JSON.parseObject(data, Map.class);</span><br><span class="line"></span><br><span class="line">        IndexResponse response &#x3D; transportClient.prepareIndex(index, type).setSource(map).get();</span><br><span class="line">        log.info(&quot;addData response status:&#123;&#125;,id:&#123;&#125;&quot;, response.status().getStatus(), response.getId());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     *  批量的插入的操作</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void batchInsert() &#123;</span><br><span class="line">        Map map &#x3D; Maps.newHashMap();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 58; i++) &#123;</span><br><span class="line">            map.put(&quot;cn-name&quot;, &quot;00&quot; + i);</span><br><span class="line">            map.put(&quot;en-name&quot;, &quot;java samlai&quot; + i);</span><br><span class="line">            map.put(&quot;age&quot;, 10 + i);</span><br><span class="line">            map.put(&quot;content&quot;, &quot; 内容  --&gt;&quot; + i);</span><br><span class="line">            IndexResponse response &#x3D; transportClient.prepareIndex(index, type, String.valueOf(i)).setSource(map).get();</span><br><span class="line">            log.info(&quot;addData response status:&#123;&#125;,id:&#123;&#125;&quot;, response.status().getStatus(), response.getId());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     *  删除操作</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void del() &#123;</span><br><span class="line">        String id &#x3D; &quot;dpcY7G8BVtcun_3JK7HX&quot;;</span><br><span class="line">        DeleteResponse response &#x3D; transportClient.prepareDelete(index, type, id).execute().actionGet();</span><br><span class="line">        log.info(&quot;deleteDataById response status:&#123;&#125;,id:&#123;&#125;&quot;, response.status().getStatus(), response.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     *  删除 index 操作</span><br><span class="line">     *</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void delIndex() &#123;</span><br><span class="line">        if (!isIndexExist(transportClient, index)) &#123;</span><br><span class="line">            log.info(&quot;Index is not exits!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        DeleteIndexResponse dResponse &#x3D; transportClient.admin().indices().prepareDelete(index).execute().actionGet();</span><br><span class="line">        if (dResponse.isAcknowledged()) &#123;</span><br><span class="line">            log.info(&quot;delete index &quot; + index + &quot;  successfully!&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            log.info(&quot;Fail to delete index &quot; + index);</span><br><span class="line">        &#125;</span><br><span class="line">&#x2F;&#x2F;        return dResponse.isAcknowledged();</span><br><span class="line">        log.info(&quot;del Index  :   &quot; + dResponse.isAcknowledged());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 修改操作</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void update() throws ExecutionException, InterruptedException &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String data &#x3D; &quot;&#123;\n&quot; +</span><br><span class="line">&#x2F;&#x2F;                &quot;  \&quot;cn-name\&quot;:\&quot;java 赖  update\&quot;\n&quot; +</span><br><span class="line">                &quot;  \&quot;cn-name\&quot;:\&quot;java 赖  update\&quot;,\n&quot; +</span><br><span class="line">                &quot;  \&quot;en-name\&quot;:\&quot;java es lai  ipdate\&quot;,\n&quot; +</span><br><span class="line">                &quot;  \&quot;age\&quot;:13,\n&quot; +</span><br><span class="line">                &quot;  \&quot;content\&quot;:\&quot;update content\&quot;\n&quot; +</span><br><span class="line">                &quot;&#125;&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String id &#x3D; &quot;d5dG7G8BVtcun_3JnrGp&quot;;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;这个版本需要把 json 字符串转为 map 对象  不然会报错</span><br><span class="line"></span><br><span class="line">        Map map &#x3D; JSON.parseObject(data, Map.class);</span><br><span class="line"></span><br><span class="line">        UpdateRequest updateRequest &#x3D; new UpdateRequest();</span><br><span class="line">        updateRequest.index(index).type(type).id(id).doc(map);</span><br><span class="line">        transportClient.update(updateRequest);</span><br><span class="line"></span><br><span class="line">        UpdateResponse result &#x3D; transportClient.update(updateRequest).get();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 默认情况下，不更改任何内容的更新会检测到它们不会更改任何内容，并返回“结果”：“noop”</span><br><span class="line"></span><br><span class="line">        log.info(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">        log.info(&quot; result :  &quot; + JSON.toJSONString(result));</span><br><span class="line"></span><br><span class="line">        log.info(&quot; update data  ：  &quot; + JSON.toJSONString(result.getResult()));</span><br><span class="line"></span><br><span class="line">        log.info(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 根据 id 来查找 es 的数据内容</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void queryId() &#123;</span><br><span class="line"></span><br><span class="line">        String id &#x3D; &quot;d5dG7G8BVtcun_3JnrGp&quot;;</span><br><span class="line"></span><br><span class="line">        String fields &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        GetRequestBuilder getRequestBuilder &#x3D; transportClient.prepareGet(index, type, id);</span><br><span class="line"></span><br><span class="line">        if (StringUtils.isNotEmpty(fields)) &#123;</span><br><span class="line">            getRequestBuilder.setFetchSource(fields.split(&quot;,&quot;), null);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        GetResponse getResponse &#x3D; getRequestBuilder.execute().actionGet();</span><br><span class="line"></span><br><span class="line">        log.info(&quot;&quot;);</span><br><span class="line">        log.info(&quot; reponse  data  :  &quot; + JSON.toJSONString(getResponse));</span><br><span class="line">        log.info(&quot; data  :  &quot; + getResponse.getSource());</span><br><span class="line">        log.info(&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 使用分词查询,并分页</span><br><span class="line">     *</span><br><span class="line">     * @param index          索引名称</span><br><span class="line">     * @param type           类型名称,可传入多个type逗号分隔</span><br><span class="line">     * @param startPage      当前页</span><br><span class="line">     * @param pageSize       每页显示条数</span><br><span class="line">     * @param query          查询条件</span><br><span class="line">     * @param fields         需要显示的字段，逗号分隔（缺省为全部字段）</span><br><span class="line">     * @param sortField      排序字段</span><br><span class="line">     * @param highlightField 高亮字段</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void queryPage() &#123;</span><br><span class="line"></span><br><span class="line">        SearchRequestBuilder searchRequestBuilder &#x3D; transportClient.prepareSearch(index);</span><br><span class="line"></span><br><span class="line">        String fields &#x3D; &quot;content,en-name&quot;;</span><br><span class="line">        String sortField &#x3D; &quot;age&quot;;</span><br><span class="line">        String highlightField &#x3D; &quot;content&quot;;</span><br><span class="line">&#x2F;&#x2F;        String highlightField &#x3D; &quot;cn-name&quot;;</span><br><span class="line">        QueryBuilder query &#x3D; QueryBuilders.boolQuery();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        int startPage &#x3D; 1;</span><br><span class="line">        int pageSize &#x3D; 10;</span><br><span class="line"></span><br><span class="line">        if (StringUtils.isNotEmpty(type)) &#123;</span><br><span class="line">            searchRequestBuilder.setTypes(type.split(&quot;,&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">        searchRequestBuilder.setSearchType(SearchType.QUERY_THEN_FETCH);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 需要显示的字段，逗号分隔（缺省为全部字段）</span><br><span class="line">        if (StringUtils.isNotEmpty(fields)) &#123;</span><br><span class="line">            searchRequestBuilder.setFetchSource(fields.split(&quot;,&quot;), null);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;排序字段</span><br><span class="line">        if (StringUtils.isNotEmpty(sortField)) &#123;</span><br><span class="line">            searchRequestBuilder.addSort(sortField, SortOrder.DESC);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 高亮（xxx&#x3D;111,aaa&#x3D;222）</span><br><span class="line">        if (StringUtils.isNotEmpty(highlightField)) &#123;</span><br><span class="line"></span><br><span class="line">            HighlightBuilder highlightBuilder &#x3D; new HighlightBuilder();</span><br><span class="line"></span><br><span class="line">            highlightBuilder.preTags(&quot;&lt;span style&#x3D;&#39;color:red&#39; &gt;&quot;);&#x2F;&#x2F;设置前缀</span><br><span class="line">            highlightBuilder.postTags(&quot;&lt;&#x2F;span&gt;&quot;);&#x2F;&#x2F;设置后缀</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 设置高亮字段</span><br><span class="line">            highlightBuilder.field(highlightField);</span><br><span class="line">            searchRequestBuilder.highlighter(highlightBuilder);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;searchRequestBuilder.setQuery(QueryBuilders.matchAllQuery());</span><br><span class="line">        searchRequestBuilder.setQuery(query);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 分页应用</span><br><span class="line">        searchRequestBuilder.setFrom(startPage).setSize(pageSize);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 设置是否按查询匹配度排序</span><br><span class="line">        searchRequestBuilder.setExplain(true);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;打印的内容 可以在 Elasticsearch head 和 Kibana  上执行查询</span><br><span class="line">        log.info(&quot;\n&#123;&#125;&quot;, searchRequestBuilder);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 执行搜索,返回搜索响应信息</span><br><span class="line">        SearchResponse searchResponse &#x3D; searchRequestBuilder.execute().actionGet();</span><br><span class="line"></span><br><span class="line">        long totalHits &#x3D; searchResponse.getHits().totalHits;</span><br><span class="line">        long length &#x3D; searchResponse.getHits().getHits().length;</span><br><span class="line"></span><br><span class="line">        log.info(&quot;共查询到[&#123;&#125;]条数据,处理数据条数[&#123;&#125;]&quot;, totalHits, length);</span><br><span class="line"></span><br><span class="line">        if (searchResponse.status().getStatus() &#x3D;&#x3D; 200) &#123;</span><br><span class="line">            &#x2F;&#x2F; 解析对象</span><br><span class="line">            List&lt;Map&lt;String, Object&gt;&gt; sourceList &#x3D; setSearchResponse(searchResponse, highlightField);</span><br><span class="line"></span><br><span class="line">            log.info(&quot; &quot;);</span><br><span class="line">            log.info(&quot; startPage  :  &quot; + startPage);</span><br><span class="line">            log.info(&quot; pageSize  :  &quot; + pageSize);</span><br><span class="line">            log.info(&quot; totalHits  :  &quot; + totalHits);</span><br><span class="line">            log.info(&quot; sourceList  :  &quot; + JSON.toJSONString(sourceList));</span><br><span class="line">            log.info(&quot; &quot;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 判断索引是否存在</span><br><span class="line">     *</span><br><span class="line">     * @param index</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static boolean isIndexExist(TransportClient transportClient, String index) &#123;</span><br><span class="line"></span><br><span class="line">        IndicesExistsResponse inExistsResponse &#x3D; transportClient.admin().indices().exists(new IndicesExistsRequest(index)).actionGet();</span><br><span class="line"></span><br><span class="line">        if (inExistsResponse.isExists()) &#123;</span><br><span class="line">            log.info(&quot;Index [&quot; + index + &quot;] is exist!&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            log.info(&quot;Index [&quot; + index + &quot;] is not exist!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return inExistsResponse.isExists();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @Description: 判断inde下指定type是否存在</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public boolean isTypeExist(TransportClient transportClient, String index, String type) &#123;</span><br><span class="line">        return isIndexExist(transportClient, index)</span><br><span class="line">                ? transportClient.admin().indices().prepareTypesExists(index).setTypes(type).execute().actionGet().isExists()</span><br><span class="line">                : false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 高亮结果集 特殊处理</span><br><span class="line">     *</span><br><span class="line">     * @param searchResponse</span><br><span class="line">     * @param highlightField</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static List&lt;Map&lt;String, Object&gt;&gt; setSearchResponse(SearchResponse searchResponse, String highlightField) &#123;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; sourceList &#x3D; new ArrayList&lt;Map&lt;String, Object&gt;&gt;();</span><br><span class="line">        StringBuffer stringBuffer &#x3D; new StringBuffer();</span><br><span class="line"></span><br><span class="line">        for (SearchHit searchHit : searchResponse.getHits().getHits()) &#123;</span><br><span class="line">            searchHit.getSourceAsMap().put(&quot;id&quot;, searchHit.getId());</span><br><span class="line"></span><br><span class="line">            if (StringUtils.isNotEmpty(highlightField)) &#123;</span><br><span class="line"></span><br><span class="line">                log.info(&quot;遍历 高亮结果集，覆盖 正常结果集&quot; + searchHit.getSourceAsMap());</span><br><span class="line"></span><br><span class="line">                HighlightField field &#x3D; searchHit.getHighlightFields().get(highlightField);</span><br><span class="line"></span><br><span class="line">                if (field !&#x3D; null) &#123;</span><br><span class="line"></span><br><span class="line">                    Text[] text &#x3D; field.getFragments();</span><br><span class="line"></span><br><span class="line">                    if (text !&#x3D; null) &#123;</span><br><span class="line">                        for (Text str : text) &#123;</span><br><span class="line">                            stringBuffer.append(str.string());</span><br><span class="line">                        &#125;</span><br><span class="line">                        &#x2F;&#x2F;遍历 高亮结果集，覆盖 正常结果集</span><br><span class="line">                        searchHit.getSourceAsMap().put(highlightField, stringBuffer.toString());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            sourceList.add(searchHit.getSourceAsMap());</span><br><span class="line">        &#125;</span><br><span class="line">        return sourceList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      java 操作 Es 的 CURD 操作
    
    </summary>
    
    
      <category term="elk" scheme="https://zuoyoulai.github.io/categories/elk/"/>
    
    
      <category term="elk" scheme="https://zuoyoulai.github.io/tags/elk/"/>
    
      <category term="java" scheme="https://zuoyoulai.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>xxx-job 分布式定时任务系统</title>
    <link href="https://zuoyoulai.github.io/2020/01/28/xxx-job/"/>
    <id>https://zuoyoulai.github.io/2020/01/28/xxx-job/</id>
    <published>2020-01-28T04:09:50.000Z</published>
    <updated>2020-01-29T16:21:53.399Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="xxx-job-fen-bu-shi-ding-shi-ren-wu-xi-tong">xxx-job 分布式定时任务系统</span><a href="#xxx-job-fen-bu-shi-ding-shi-ren-wu-xi-tong" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#lai-yuan">来源</a></li><li><a href="#huan-jing-zhun-bei">环境准备</a></li></ul><!-- tocstop --></div>### 来源<ul><li>官方文档 :  <a href="https://www.xuxueli.com/index.html" target="_blank" rel="noopener">https://www.xuxueli.com/index.html</a></li></ul><h3><span id="huan-jing-zhun-bei">环境准备</span><a href="#huan-jing-zhun-bei" class="header-anchor"></a></h3><ul><li>docker镜像</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull xuxueli&#x2F;xxl-job-admin:2.1.2</span><br></pre></td></tr></table></figure><ul><li>ip地址查看</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ » ifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1                                                      haodalai@localhost</span><br><span class="line">inet 192.168.31.164 netmask 0xffffff00 broadcast 192.168.31.255</span><br></pre></td></tr></table></figure><ul><li>启动docker 镜像</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e PARAMS&#x3D;&quot;--spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;192.168.31.164:3307&#x2F;xxl_job?Unicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8   --spring.datasource.password&#x3D;samlai123&quot; -p 8787:8080 -v &#x2F;Users&#x2F;haodalai&#x2F;docker&#x2F;xxx-job&#x2F;logs:&#x2F;data&#x2F;applogs --name xxl-job-admin  -d xuxueli&#x2F;xxl-job-admin:2.1.2</span><br></pre></td></tr></table></figure><ul><li><p>访问地址 :  <a href="http://localhost:8787/xxl-job-admin" target="_blank" rel="noopener">http://localhost:8787/xxl-job-admin</a></p></li><li><p>访问的账号与密码: admin/123456</p></li></ul>]]></content>
    
    <summary type="html">
    
      分布式定时任务系统-job
    
    </summary>
    
    
      <category term="分布式定时任务系统" scheme="https://zuoyoulai.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="分布式定时任务系统" scheme="https://zuoyoulai.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="xxx-job" scheme="https://zuoyoulai.github.io/tags/xxx-job/"/>
    
  </entry>
  
  <entry>
    <title>docker 部署使用 ELk</title>
    <link href="https://zuoyoulai.github.io/2020/01/27/elk/"/>
    <id>https://zuoyoulai.github.io/2020/01/27/elk/</id>
    <published>2020-01-27T15:47:27.000Z</published>
    <updated>2020-01-28T09:32:20.988Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="docker-bu-shu-shi-yong-elk">docker 部署使用 ELk</span><a href="#docker-bu-shu-shi-yong-elk" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#ji-chu-la-qu-jing-xiang">基础 : 拉取镜像</a></li><li><a href="#ji-cheng-elk">集成:ELK</a><ul><li><a href="#fang-wen-fu-wu">访问服务</a></li><li><a href="#kibana-cao-zuo-es-zeng-shan-gai-cha-cao-zuo">kibana 操作 Es 增删该查操作</a></li></ul></li><li><a href="#gai-nian">概念</a></li><li><a href="#kibana-dui-es-zeng-shan-gai-cha">kibana 对 es 增删改查</a></li></ul><!-- tocstop --></div><h3><span id="ji-chu-la-qu-jing-xiang">基础 : 拉取镜像</span><a href="#ji-chu-la-qu-jing-xiang" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull elasticsearch:6.5.4</span><br><span class="line">docker pull kibana:6.5.4</span><br><span class="line">docker pull logstash:6.5.4</span><br></pre></td></tr></table></figure><h3><span id="ji-cheng-elk">集成:ELK</span><a href="#ji-cheng-elk" class="header-anchor"></a></h3><ul><li>工具: docker-compose</li><li>版本的指定: 在 compose 文件下有.env 文件写上相应的版本号内容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ELK_VERSION&#x3D;6.5.4</span><br></pre></td></tr></table></figure></li><li>compose 文件内容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">version: &#39;2&#39;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  elasticsearch:</span><br><span class="line">    image: &quot;elasticsearch:$&#123;ELK_VERSION&#125;&quot;</span><br><span class="line">    container_name: elasticsearch</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9200:9200&quot;</span><br><span class="line">      - &quot;9300:9300&quot;</span><br><span class="line">    environment:</span><br><span class="line">      ES_JAVA_OPTS: &quot;-Xmx1024m -Xms1024m&quot;</span><br><span class="line">    #command: [&quot;bash&quot;, &quot;-c&quot;, &quot;echo &#39;discovery.type: single-node&#39;&gt;&gt;&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;config&#x2F;elasticsearch.yml; &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-entrypoint.sh eswrapper&quot;]</span><br><span class="line">    command: [&quot;bash&quot;, &quot;-c&quot;, &quot;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-entrypoint.sh eswrapper&quot;]</span><br><span class="line">    networks:</span><br><span class="line">      - elk</span><br><span class="line"></span><br><span class="line">  logstash:</span><br><span class="line">    image: &quot;logstash:$&#123;ELK_VERSION&#125;&quot;</span><br><span class="line">    container_name: logstash</span><br><span class="line">    volumes:</span><br><span class="line">      - .&#x2F;logstash&#x2F;pipeline:&#x2F;usr&#x2F;share&#x2F;logstash&#x2F;pipeline:ro</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5000:5000&quot;</span><br><span class="line">    environment:</span><br><span class="line">      LS_JAVA_OPTS: &quot;-Xmx256m -Xms256m&quot;</span><br><span class="line">    depends_on:</span><br><span class="line">      - elasticsearch</span><br><span class="line">    command: [&quot;bash&quot;, &quot;-c&quot;, &quot;echo &#39;path.config: &#x2F;usr&#x2F;share&#x2F;logstash&#x2F;pipeline&#39;&gt;&gt;&#x2F;usr&#x2F;share&#x2F;logstash&#x2F;config&#x2F;logstash.yml; &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-entrypoint&quot;]</span><br><span class="line">    networks:</span><br><span class="line">      - elk</span><br><span class="line"></span><br><span class="line">  kibana:</span><br><span class="line">    image: &quot;kibana:$&#123;ELK_VERSION&#125;&quot;</span><br><span class="line">    container_name: kibana</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5601:5601&quot;</span><br><span class="line">    depends_on:</span><br><span class="line">      - elasticsearch</span><br><span class="line">    networks:</span><br><span class="line">      - elk</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  elk:</span><br><span class="line">    driver: bridge</span><br></pre></td></tr></table></figure></li></ul><h2><span id="fang-wen-fu-wu">访问服务</span><a href="#fang-wen-fu-wu" class="header-anchor"></a></h2><ul><li>访问 Es :  <a href="http://localhost:9200/" target="_blank" rel="noopener">http://localhost:9200/</a></li><li>访问 kibana : <a href="http://localhost:5601" target="_blank" rel="noopener">http://localhost:5601</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 打开dev Tools</span><br><span class="line">2. 在窗口进行查询 :  GET &#x2F;_search</span><br></pre></td></tr></table></figure><h2><span id="kibana-cao-zuo-es-zeng-shan-gai-cha-cao-zuo">kibana 操作 Es 增删该查操作</span><a href="#kibana-cao-zuo-es-zeng-shan-gai-cha-cao-zuo" class="header-anchor"></a></h2><h3><span id="gai-nian">概念</span><a href="#gai-nian" class="header-anchor"></a></h3><ul><li>类比:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns</span><br><span class="line">Elasticsearch -&gt; Indices   -&gt; Types  -&gt; Documents -&gt; Fields</span><br></pre></td></tr></table></figure><h3><span id="kibana-dui-es-zeng-shan-gai-cha">kibana 对 es 增删改查</span><a href="#kibana-dui-es-zeng-shan-gai-cha" class="header-anchor"></a></h3><ul><li><p>概念文档:  <a href="http://blog.didispace.com/books/elasticsearch-definitive-guide-cn/010_Intro/00_README.html" target="_blank" rel="noopener">http://blog.didispace.com/books/elasticsearch-definitive-guide-cn/010_Intro/00_README.html</a></p></li><li><p>例子文档:  <a href="https://blog.csdn.net/u014646662/category_8747782_2.html" target="_blank" rel="noopener">https://blog.csdn.net/u014646662/category_8747782_2.html</a></p></li><li><p>查看查询全部内容</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET &#x2F;_search</span><br></pre></td></tr></table></figure><ul><li>增加一个 document 内容,格式 : POST /{index}/{type}   不加 id 则系统默认给出一个 id</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST &#x2F;db-1&#x2F;tab-1</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cn-name&quot;:&quot;赖豪达&quot;,</span><br><span class="line">  &quot;en-name&quot;:&quot;samlai&quot;,</span><br><span class="line">  &quot;age&quot;:28,</span><br><span class="line">  &quot;content&quot;:&quot;我的简介操作....&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">返回的结果:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; : &quot;db-1&quot;,</span><br><span class="line">  &quot;_type&quot; : &quot;tab-1&quot;,</span><br><span class="line">  &quot;_id&quot; : &quot;dZc56m8BVtcun_3JvbEQ&quot;,</span><br><span class="line">  &quot;_version&quot; : 1,</span><br><span class="line">  &quot;result&quot; : &quot;created&quot;,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 2,</span><br><span class="line">    &quot;successful&quot; : 1,</span><br><span class="line">    &quot;failed&quot; : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;_seq_no&quot; : 1,</span><br><span class="line">  &quot;_primary_term&quot; : 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">or 自己指定一个 id :</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">POST &#x2F;db-1&#x2F;tab-1&#x2F;1</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cn-name&quot;:&quot;赖豪达&quot;,</span><br><span class="line">  &quot;en-name&quot;:&quot;samlai&quot;,</span><br><span class="line">  &quot;age&quot;:28,</span><br><span class="line">  &quot;content&quot;:&quot;我的简介操作....&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>删除一个 document 内容: DELETE /{index}/{type}/{id}</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">DELETE db-1&#x2F;tab-1&#x2F;dJcs6m8BVtcun_3JbrGq</span><br></pre></td></tr></table></figure><ul><li>修改的操作,分覆盖全部 与 修改某些字段:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. </span><br><span class="line"></span><br><span class="line">覆盖全部字段:</span><br><span class="line"></span><br><span class="line">PUT &#x2F;db-1&#x2F;tab-1&#x2F;2</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cn-name&quot;:&quot;赖豪达0002  修改---&quot;,</span><br><span class="line">  &quot;en-name&quot;:&quot;samlai0002&quot;,</span><br><span class="line">  &quot;age&quot;:28,</span><br><span class="line">  &quot;content&quot;:&quot;我的简介操作....0002&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.</span><br><span class="line"></span><br><span class="line">修改某些字段内容:</span><br><span class="line"></span><br><span class="line">POST db-1&#x2F;tab-1&#x2F;1&#x2F;_update</span><br><span class="line">&#123;</span><br><span class="line">  &quot;doc&quot;: &#123;</span><br><span class="line">    &quot;en-name&quot;:&quot;我的英文名字是:赖豪达&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; : &quot;db-1&quot;,</span><br><span class="line">  &quot;_type&quot; : &quot;tab-1&quot;,</span><br><span class="line">  &quot;_id&quot; : &quot;1&quot;,</span><br><span class="line">  &quot;_version&quot; : 2,</span><br><span class="line">  &quot;result&quot; : &quot;noop&quot;,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 0,</span><br><span class="line">    &quot;successful&quot; : 0,</span><br><span class="line">    &quot;failed&quot; : 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>查询一个 document 内容 : GET /{index}/{type}/{id}</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line"></span><br><span class="line">GET db-1&#x2F;tab-1&#x2F;dJcs6m8BVtcun_3JbrGq</span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; : &quot;db-1&quot;,</span><br><span class="line">  &quot;_type&quot; : &quot;tab-1&quot;,</span><br><span class="line">  &quot;_id&quot; : &quot;dZc56m8BVtcun_3JvbEQ&quot;,</span><br><span class="line">  &quot;_version&quot; : 1,</span><br><span class="line">  &quot;found&quot; : true,</span><br><span class="line">  &quot;_source&quot; : &#123;</span><br><span class="line">    &quot;cn-name&quot; : &quot;赖豪达&quot;,</span><br><span class="line">    &quot;en-name&quot; : &quot;samlai&quot;,</span><br><span class="line">    &quot;age&quot; : 28,</span><br><span class="line">    &quot;content&quot; : &quot;我的简介操作....&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.</span><br><span class="line"></span><br><span class="line">GET db-1&#x2F;tab-1&#x2F;dJcs6m8BVtcun_3JbrGq&#x2F;_source</span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;cn-name&quot; : &quot;赖豪达&quot;,</span><br><span class="line">  &quot;en-name&quot; : &quot;samlai&quot;,</span><br><span class="line">  &quot;age&quot; : 28,</span><br><span class="line">  &quot;content&quot; : &quot;我的简介操作....&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      docker 部署使用 ELk
    
    </summary>
    
    
      <category term="elk" scheme="https://zuoyoulai.github.io/categories/elk/"/>
    
    
      <category term="elk" scheme="https://zuoyoulai.github.io/tags/elk/"/>
    
      <category term="docker" scheme="https://zuoyoulai.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>mybatis-batch 批处理</title>
    <link href="https://zuoyoulai.github.io/2020/01/22/mybatis-batch/"/>
    <id>https://zuoyoulai.github.io/2020/01/22/mybatis-batch/</id>
    <published>2020-01-22T07:27:01.000Z</published>
    <updated>2020-01-22T07:40:34.345Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#pi-liang-chu-li-fang-shi">批量处理方式</a></li><li><a href="#yi-shang-3-chong-de-you-lie">以上3种的优劣:</a></li><li><a href="#li-zi-demo">例子demo</a></li></ul><!-- tocstop --></div><h3><span id="pi-liang-chu-li-fang-shi">批量处理方式</span><a href="#pi-liang-chu-li-fang-shi" class="header-anchor"></a></h3><ul><li>原生的JDBC  :  这种方式最快，代码比较麻烦</li><li>Mybatis 的 ExecutorType.BATCH ：代码编写比较简单，数据库连接需要添加allowMultiQueries=true</li><li>Mybatis 动态 sql拼接方式</li></ul><h3><span id="yi-shang-3-chong-de-you-lie">以上3种的优劣:</span><a href="#yi-shang-3-chong-de-you-lie" class="header-anchor"></a></h3><ul><li><a href="https://blog.csdn.net/qq_40144558/article/details/93981183" target="_blank" rel="noopener">参考文章: 关于Mybatis批量插入使用JDBC原生batch批处理以及mybatis的ExecutorType.BATCH的批处理和Mybatis的动态sql语句批处理</a></li></ul><h3><span id="li-zi-demo">例子demo</span><a href="#li-zi-demo" class="header-anchor"></a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  batch insert</span></span><br><span class="line"><span class="comment">     *  表数据准备</span></span><br><span class="line"><span class="comment">     *  create table `kt_1_trigger_logs` like  kt_merchant_id_trigger_logs;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  批量处理 : 添加 200w条数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batch</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SqlSession sqlSession = sqlSessionFactory.openSession(ExecutorType.BATCH);</span><br><span class="line"></span><br><span class="line">            SubMerchantIdTriggerLogsMapper subMerchantIdTriggerLogsMapper = (SubMerchantIdTriggerLogsMapper) sqlSession.getMapper(SubMerchantIdTriggerLogsMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">200</span>; j++) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">                    SubMerchantIdTriggerLogs logs = <span class="keyword">new</span> SubMerchantIdTriggerLogs();</span><br><span class="line">                    logs.setAppId(appId);</span><br><span class="line">                    logs.setMerchantId(merchantId);</span><br><span class="line"></span><br><span class="line">                    logs.setSdkType(test_str);</span><br><span class="line">                    logs.setSource(test_str);</span><br><span class="line">                    logs.setTriggeredAt(<span class="keyword">new</span> Date());</span><br><span class="line">                    logs.setUserid(Tools.getRandStr());</span><br><span class="line">                    logs.setDeviceid(Tools.getRandStr(<span class="number">5</span>));</span><br><span class="line">                    logs.setConditions(<span class="string">""</span>);</span><br><span class="line">                    <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        logs.setIp(Tools.getRandStr(<span class="number">5</span>));</span><br><span class="line">                        logs.setUpdatedAt(<span class="keyword">new</span> Date());</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        logs.setIp(<span class="string">""</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    logs.setCreatedAt(<span class="keyword">new</span> Date());</span><br><span class="line">      </span><br><span class="line">                    subMerchantIdTriggerLogsMapper.insertSelective(logs);</span><br><span class="line">                &#125;</span><br><span class="line">                sqlSession.commit();</span><br><span class="line">            &#125;</span><br><span class="line">            sqlSession.close();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            log.error(ex.getMessage(), ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  batch update</span></span><br><span class="line"><span class="comment">     *  批量的 update 的操作 :  校验出，有些字段有有些没有的话则相应的更新的</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SqlSession sqlSession = sqlSessionFactory.openSession(ExecutorType.BATCH);</span><br><span class="line">            SubMerchantIdTriggerLogsMapper subMerchantIdTriggerLogsMapper = (SubMerchantIdTriggerLogsMapper) sqlSession.getMapper(SubMerchantIdTriggerLogsMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                SubMerchantIdTriggerLogs subMerchantIdTriggerLogs = <span class="keyword">new</span> SubMerchantIdTriggerLogs();</span><br><span class="line">                subMerchantIdTriggerLogs.setMerchantId(merchantId);</span><br><span class="line">                subMerchantIdTriggerLogs.setId(i);</span><br><span class="line">                <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    subMerchantIdTriggerLogs.setIp(<span class="string">""</span>);</span><br><span class="line">                    subMerchantIdTriggerLogs.setSdkVersion(<span class="string">""</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                subMerchantIdTriggerLogs.setUpdatedAt(<span class="keyword">new</span> Date());</span><br><span class="line">                subMerchantIdTriggerLogsMapper.updateByPrimaryKeySelective(subMerchantIdTriggerLogs);</span><br><span class="line">            &#125;</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            log.error(ex.getMessage(), ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量更新后的操作断言</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAfterDo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SqlSession sqlSession = sqlSessionFactory.openSession(ExecutorType.BATCH,Boolean.FALSE);</span><br><span class="line">            SubMerchantIdTriggerLogsMapper subMerchantIdTriggerLogsMapper = (SubMerchantIdTriggerLogsMapper) sqlSession.getMapper(SubMerchantIdTriggerLogsMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            List&lt;SubMerchantIdTriggerLogs&gt; list = Lists.newArrayList();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                SubMerchantIdTriggerLogs logs = <span class="keyword">new</span> SubMerchantIdTriggerLogs();</span><br><span class="line">                logs.setAppId(appId);</span><br><span class="line">                logs.setMerchantId(merchantId);</span><br><span class="line"></span><br><span class="line">                logs.setSdkType(test_str);</span><br><span class="line">                logs.setSource(test_str);</span><br><span class="line">                logs.setTriggeredAt(<span class="keyword">new</span> Date());</span><br><span class="line">                logs.setUserid(Tools.getRandStr());</span><br><span class="line">                logs.setDeviceid(Tools.getRandStr(<span class="number">5</span>));</span><br><span class="line">                logs.setConditions(<span class="string">""</span>);</span><br><span class="line">                <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    logs.setIp(Tools.getRandStr(<span class="number">5</span>));</span><br><span class="line">                    logs.setUpdatedAt(<span class="keyword">new</span> Date());</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    logs.setIp(<span class="string">""</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                logs.setCreatedAt(<span class="keyword">new</span> Date());</span><br><span class="line">      </span><br><span class="line">                list.add(logs);</span><br><span class="line">                subMerchantIdTriggerLogsMapper.insertSelective(logs);</span><br><span class="line">            &#125;</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            <span class="comment">//刷新执行结果可以进行断言操作  [发现有无这个执行都可以拿到新增 insert data 的 id 的]</span></span><br><span class="line"><span class="comment">//            sqlSession.flushStatements();</span></span><br><span class="line">            <span class="comment">//清除缓存</span></span><br><span class="line"><span class="comment">//            sqlSession.clearCache();</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">            list.forEach(x-&gt;&#123;</span><br><span class="line">                log.info(JSON.toJSONString(x));</span><br><span class="line">            &#125;);</span><br><span class="line">            list.clear();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            log.error(ex.getMessage(), ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      mybatis-batch 批处理
    
    </summary>
    
    
      <category term="mybatis" scheme="https://zuoyoulai.github.io/categories/mybatis/"/>
    
    
      <category term="mybatis" scheme="https://zuoyoulai.github.io/tags/mybatis/"/>
    
      <category term="sql" scheme="https://zuoyoulai.github.io/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>运维Redis服务信息</title>
    <link href="https://zuoyoulai.github.io/2020/01/13/Redis%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF/"/>
    <id>https://zuoyoulai.github.io/2020/01/13/Redis%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF/</id>
    <published>2020-01-13T14:30:59.000Z</published>
    <updated>2020-01-13T14:38:45.897Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="yun-wei-redis-fu-wu-xin-xi">运维Redis服务信息</span><a href="#yun-wei-redis-fu-wu-xin-xi" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#redis-dui-lie-xiao-fei-wen-ti">redis 队列消费问题</a><ul><li><a href="#shu-ju-biao-de-zhun-bei">数据表的准备</a></li><li><a href="#xi-tong-redis-pei-zhi">系统 redis 配置</a></li><li><a href="#redis-lian-jie-chi-ji-ben-pei-zhi-shuo-ming">redis 连接池基本配置说明</a></li><li><a href="#jin-ru-redis-de-rong-qi-de-zhi-ling-cao-zuo">进入 redis 的容器的指令操作</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="redis-dui-lie-xiao-fei-wen-ti">redis 队列消费问题</span><a href="#redis-dui-lie-xiao-fei-wen-ti" class="header-anchor"></a></h2><ul><li>参考文章: <a href="https://mp.weixin.qq.com/s/4DYdDEHpiLs8aoW6y9k4Mw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/4DYdDEHpiLs8aoW6y9k4Mw</a></li></ul><h3><span id="shu-ju-biao-de-zhun-bei">数据表的准备</span><a href="#shu-ju-biao-de-zhun-bei" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table &#96;xx_tbl&#96; like  model_tbl;</span><br><span class="line"></span><br><span class="line">example:</span><br><span class="line"></span><br><span class="line">create table &#96;xx_tbl&#96; like  model_tbl;</span><br></pre></td></tr></table></figure><h3><span id="xi-tong-redis-pei-zhi">系统 redis 配置</span><a href="#xi-tong-redis-pei-zhi" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#rdb backup</span><br><span class="line">save 300 10</span><br><span class="line"></span><br><span class="line">#aof backup</span><br><span class="line">#是否开启持久化策略</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">#yes: 在aof重写期间不做fsync刷盘操作，可能丢失整个AOF重写期间的数据</span><br><span class="line">no-appendfsync-on-rewrite  yes</span><br></pre></td></tr></table></figure><h3><span id="redis-lian-jie-chi-ji-ben-pei-zhi-shuo-ming">redis 连接池基本配置说明</span><a href="#redis-lian-jie-chi-ji-ben-pei-zhi-shuo-ming" class="header-anchor"></a></h3><ul><li>redis.pool.maxTotal=1000   :  最大活动对象数</li><li>redis.pool.maxIdle=100 最大能够保持idel状态的对象数</li><li>redis.pool.minIdle=50  最小能够保持idel状态的对象数</li></ul><h3><span id="jin-ru-redis-de-rong-qi-de-zhi-ling-cao-zuo">进入 redis 的容器的指令操作</span><a href="#jin-ru-redis-de-rong-qi-de-zhi-ling-cao-zuo" class="header-anchor"></a></h3><ul><li><p>docker ps</p></li><li><p>docker exec -it [containerid] /bin/bash</p></li><li><p>docker exec -it [containerid] redis-cli -a root </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker exec -it 77ae redis-cli</span><br><span class="line">进入指令窗口,进行 root 操作:</span><br><span class="line">&gt;&gt; auth [your password]</span><br><span class="line"></span><br><span class="line">进入指令操作:</span><br><span class="line">docker exec -it 77ae redis-cli -a root</span><br></pre></td></tr></table></figure></li><li><p>监控redis的磁盘使用情况与 clients 的连接数: redis-cli –stat -i 10</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; docker exec -it 77ae redis-cli -a root --stat -i 10   [不安全的写法,因为密码写在明文上]</span><br><span class="line"></span><br><span class="line">打出指令进行监控的操作,定时的刷出日志内容:  【单位是: 10s】</span><br><span class="line"></span><br><span class="line">------- data ------ --------------------- load -------------------- - child -</span><br><span class="line">keys       mem      clients blocked requests            connections          </span><br><span class="line">11         5.55M    3       0       312130 (+917)       690</span><br></pre></td></tr></table></figure></li><li><p>查看 redis 某个节点的网络延迟: redis-cli –latentcy  -h 127.0.0.1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; docker exec -it 77ae redis-cli -a root --latency -h 127.0.0.1</span><br><span class="line"></span><br><span class="line">min: 0, max: 7, avg: 0.25 (15009 samples)</span><br><span class="line"></span><br><span class="line">avg：0.25，即延迟为250μs。如果通过外网连接网络延迟会很高，比如跨机房的redis调用，延迟高的情况下使用redis反而比使用本地硬盘读写性能更差</span><br></pre></td></tr></table></figure></li></ul><h4><span id="ming-ling-zhi-ling">命令指令</span><a href="#ming-ling-zhi-ling" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">key &#x3D;  trigger_log_list</span><br><span class="line"></span><br><span class="line">查看链表的长度:</span><br><span class="line">&gt;&gt; llen trigger_log_list</span><br><span class="line"></span><br><span class="line">查看链表的数据:</span><br><span class="line">&gt;&gt; lrange trigger_log_list 0 10</span><br></pre></td></tr></table></figure><h4><span id="jian-kong-de-zhi-ling-cao-zuo">监控的指令操作</span><a href="#jian-kong-de-zhi-ling-cao-zuo" class="header-anchor"></a></h4><ul><li>查看 redis 当前的连接数 : info clients</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Clients</span><br><span class="line">connected_clients:12</span><br><span class="line">client_recent_max_input_buffer:2</span><br><span class="line">client_recent_max_output_buffer:0</span><br><span class="line">blocked_clients:0</span><br><span class="line">&#96;&#96;&#96; </span><br><span class="line"></span><br><span class="line">+ 查询redis允许的最大连接数 : config get maxclients</span><br><span class="line">&#96;&#96;&#96;text</span><br><span class="line">1) &quot;maxclients&quot;</span><br><span class="line">2) &quot;10000&quot;</span><br></pre></td></tr></table></figure><ul><li><p>每秒处理的命令数:  info stats</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; info stats</span><br><span class="line"># Stats</span><br><span class="line">total_connections_received:1</span><br><span class="line">total_commands_processed:2</span><br><span class="line">instantaneous_ops_per_sec:0</span><br><span class="line">total_net_input_bytes:129</span><br><span class="line">total_net_output_bytes:135</span><br><span class="line">instantaneous_input_kbps:0.00</span><br><span class="line">instantaneous_output_kbps:0.00</span><br><span class="line">rejected_connections:0</span><br><span class="line">sync_full:0</span><br><span class="line">sync_partial_ok:0</span><br><span class="line">sync_partial_err:0</span><br><span class="line">expired_keys:313904035720</span><br><span class="line">expired_stale_perc:0.00</span><br><span class="line">expired_time_cap_reached_count:0</span><br><span class="line">evicted_keys:0</span><br><span class="line">keyspace_hits:1</span><br><span class="line">keyspace_misses:0</span><br><span class="line">pubsub_channels:0</span><br><span class="line">pubsub_patterns:0</span><br><span class="line">latest_fork_usec:0</span><br><span class="line">migrate_cached_sockets:0</span><br><span class="line">slave_expires_tracked_keys:0</span><br><span class="line">active_defrag_hits:0</span><br><span class="line">active_defrag_misses:0</span><br><span class="line">active_defrag_key_hits:0</span><br><span class="line">active_defrag_key_misses:0</span><br></pre></td></tr></table></figure></li><li><p>慢日志的查询 :  slowlog get  可通过config set slowlog-log-slower-than xxx修改慢查询时间，单位微秒，默认情况下，这个值为10000</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; slowlog get</span><br><span class="line">1) 1) (integer) 0</span><br><span class="line">   2) (integer) 1578658649</span><br><span class="line">   3) (integer) 15696</span><br><span class="line">   4) 1) &quot;LRANGE&quot;</span><br><span class="line">      2) &quot;trigger_log_list_0&quot;</span><br><span class="line">      3) &quot;0&quot;</span><br><span class="line">      4) &quot;999&quot;</span><br><span class="line">   5) &quot;172.17.0.1:51742&quot;</span><br><span class="line">   6) &quot;&quot;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      运维Redis服务信息
    
    </summary>
    
    
      <category term="Redis" scheme="https://zuoyoulai.github.io/categories/Redis/"/>
    
    
      <category term="Docker" scheme="https://zuoyoulai.github.io/tags/Docker/"/>
    
      <category term="Redis" scheme="https://zuoyoulai.github.io/tags/Redis/"/>
    
      <category term="运维" scheme="https://zuoyoulai.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>线上系统运行信息查看 shell 脚本</title>
    <link href="https://zuoyoulai.github.io/2020/01/09/%E7%BA%BF%E4%B8%8A%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E4%BF%A1%E6%81%AF%E6%9F%A5%E7%9C%8B/"/>
    <id>https://zuoyoulai.github.io/2020/01/09/%E7%BA%BF%E4%B8%8A%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E4%BF%A1%E6%81%AF%E6%9F%A5%E7%9C%8B/</id>
    <published>2020-01-09T10:41:03.000Z</published>
    <updated>2020-01-09T10:53:20.669Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="xian-shang-xi-tong-yun-xing-xin-xi-cha-kan-shell-jiao-ben">线上系统运行信息查看 shell 脚本</span><a href="#xian-shang-xi-tong-yun-xing-xin-xi-cha-kan-shell-jiao-ben" class="header-anchor"></a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">project_path&#x3D;&quot;&#x2F;Users&#x2F;haodalai&#x2F;go&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;显示系统磁盘分布情况&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line">df -h</span><br><span class="line"></span><br><span class="line">echo &quot;&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;显示文件或目录占用情况&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line">du -sh $project_path</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      线上系统运行信息查看 shell 脚本
    
    </summary>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/tags/Linux/"/>
    
      <category term="Shell" scheme="https://zuoyoulai.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>每天学习一个 Linux 指令 - du 与 df 指令</title>
    <link href="https://zuoyoulai.github.io/2020/01/09/Linux-Du-Df/"/>
    <id>https://zuoyoulai.github.io/2020/01/09/Linux-Du-Df/</id>
    <published>2020-01-09T06:28:10.000Z</published>
    <updated>2020-01-09T10:39:59.858Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="linux-de-du-yu-df-zhi-ling">Linux的 du 与 df 指令</span><a href="#linux-de-du-yu-df-zhi-ling" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#df-zhi-ling">df 指令</a></li><li><a href="#du-zhi-ling">du 指令</a></li></ul><!-- tocstop --></div><h3><span id="df-zhi-ling">df 指令</span><a href="#df-zhi-ling" class="header-anchor"></a></h3><ul><li>df命令用于显示目前在Linux系统上的文件系统的磁盘使用情况统计</li><li>格式 : df [选项]… [FILE]…</li><li>经常使用: df -h</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">文件-a, --all 包含所有的具有 0 Blocks 的文件系统</span><br><span class="line"></span><br><span class="line">文件--block-size&#x3D;&#123;SIZE&#125; 使用 &#123;SIZE&#125; 大小的 Blocks</span><br><span class="line"></span><br><span class="line">文件-h, --human-readable 使用人类可读的格式(预设值是不加这个选项的...)</span><br><span class="line"></span><br><span class="line">文件-H, --si 很像 -h, 但是用 1000 为单位而不是用 1024</span><br><span class="line"></span><br><span class="line">文件-i, --inodes 列出 inode 资讯，不列出已使用 block</span><br><span class="line"></span><br><span class="line">文件-k, --kilobytes 就像是 --block-size&#x3D;1024</span><br><span class="line"></span><br><span class="line">文件-l, --local 限制列出的文件结构</span><br><span class="line"></span><br><span class="line">文件-m, --megabytes 就像 --block-size&#x3D;1048576</span><br><span class="line"></span><br><span class="line">文件--no-sync 取得资讯前不 sync (预设值)</span><br><span class="line"></span><br><span class="line">文件-P, --portability 使用 POSIX 输出格式</span><br><span class="line"></span><br><span class="line">文件--sync 在取得资讯前 sync</span><br><span class="line"></span><br><span class="line">文件-t, --type&#x3D;TYPE 限制列出文件系统的 TYPE</span><br><span class="line"></span><br><span class="line">文件-T, --print-type 显示文件系统的形式</span><br><span class="line"></span><br><span class="line">文件-x, --exclude-type&#x3D;TYPE 限制列出文件系统不要显示 TYPE</span><br><span class="line"></span><br><span class="line">文件-v (忽略)</span><br><span class="line"></span><br><span class="line">文件--help 显示这个帮手并且离开</span><br><span class="line"></span><br><span class="line">文件--version 输出版本资讯并且离开</span><br></pre></td></tr></table></figure><h3><span id="du-zhi-ling">du 指令</span><a href="#du-zhi-ling" class="header-anchor"></a></h3><ul><li>du命令用于显示文件或目录所占用的磁盘空间</li><li>格式 : du [option] 文件/目录</li><li>常用 :<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -sh xxx  显示总目录的大小，但是不会列出目录中的每一个文件</span><br><span class="line">du -sh xxx&#x2F;*  列出xxx下每个目录和文件所占的容量</span><br><span class="line">du -h --max-depth&#x3D;1  Linux 查找占用空间最大的文件与目录</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-a或-all 显示目录中个别文件的大小。</span><br><span class="line"></span><br><span class="line">-b或-bytes 显示目录或文件大小时，以byte为单位。</span><br><span class="line"></span><br><span class="line">-c或--total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。</span><br><span class="line"></span><br><span class="line">-D或--dereference-args 显示指定符号连接的源文件大小。</span><br><span class="line"></span><br><span class="line">-h或--human-readable 以K，M，G为单位，提高信息的可读性。</span><br><span class="line"></span><br><span class="line">-H或--si 与-h参数相同，但是K，M，G是以1000为换算单位。</span><br><span class="line"></span><br><span class="line">-k或--kilobytes 以1024 bytes为单位。</span><br><span class="line"></span><br><span class="line">-l或--count-links 重复计算硬件连接的文件。</span><br><span class="line"></span><br><span class="line">-L&lt;符号连接&gt;或--dereference&lt;符号连接&gt; 显示选项中所指定符号连接的源文件大小。</span><br><span class="line"></span><br><span class="line">-m或--megabytes 以1MB为单位。</span><br><span class="line"></span><br><span class="line">-s或--summarize 仅显示总计。</span><br><span class="line"></span><br><span class="line">-S或--separate-dirs 显示个别目录的大小时，并不含其子目录的大小。</span><br><span class="line"></span><br><span class="line">-x或--one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。</span><br><span class="line"></span><br><span class="line">-X&lt;文件&gt;或--exclude-from&#x3D;&lt;文件&gt; 在&lt;文件&gt;指定目录或文件。</span><br><span class="line"></span><br><span class="line">--exclude&#x3D;&lt;目录或文件&gt; 略过指定的目录或文件。</span><br><span class="line"></span><br><span class="line">--max-depth&#x3D;&lt;目录层数&gt; 超过指定层数的目录后，予以忽略。</span><br><span class="line"></span><br><span class="line">--help 显示帮助。</span><br><span class="line"></span><br><span class="line">--version 显示版本信息</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      每天学习一个 Linux 指令 - du 与 df 指令
    
    </summary>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>优秀 GitHub 资源</title>
    <link href="https://zuoyoulai.github.io/2020/01/08/Good-GitHub/"/>
    <id>https://zuoyoulai.github.io/2020/01/08/Good-GitHub/</id>
    <published>2020-01-08T09:52:20.000Z</published>
    <updated>2020-01-09T06:13:54.576Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#you-xiu-github-zi-yuan">优秀 GitHub 资源</a><ul><li><a href="#java-xiang-guan">Java 相关</a></li><li><a href="#linux-xiang-guan">Linux 相关</a></li><li><a href="#go-xiang-guan">Go 相关</a></li></ul></li></ul><!-- tocstop --></div>## 优秀 GitHub 资源<h3><span id="java-xiang-guan">Java 相关</span><a href="#java-xiang-guan" class="header-anchor"></a></h3><table><thead><tr><th>名称</th><th>Url</th></tr></thead><tbody><tr><td>架构师知识</td><td><a href="https://doocs.github.io/advanced-java/" target="_blank" rel="noopener">https://doocs.github.io/advanced-java/</a></td></tr><tr><td>大数据笔记</td><td><a href="https://github.com/heibaiying/BigData-Notes?utm_source=gold_browser_extension" target="_blank" rel="noopener">https://github.com/heibaiying/BigData-Notes?utm_source=gold_browser_extension</a></td></tr><tr><td>分布式任务调度 xxl-job</td><td><a href="https://github.com/xuxueli/xxl-job?utm_source=gold_browser_extension" target="_blank" rel="noopener">https://github.com/xuxueli/xxl-job?utm_source=gold_browser_extension</a></td></tr></tbody></table><h3><span id="linux-xiang-guan">Linux 相关</span><a href="#linux-xiang-guan" class="header-anchor"></a></h3><table><thead><tr><th>名称</th><th>Url</th></tr></thead></table><h3><span id="go-xiang-guan">Go 相关</span><a href="#go-xiang-guan" class="header-anchor"></a></h3><table><thead><tr><th>名称</th><th>Url</th></tr></thead><tbody><tr><td>go学习系列文章</td><td><a href="https://www.liwenzhou.com/categories/Golang/" target="_blank" rel="noopener">https://www.liwenzhou.com/categories/Golang/</a></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      优秀 GitHub 资源
    
    </summary>
    
    
      <category term="GitHub" scheme="https://zuoyoulai.github.io/categories/GitHub/"/>
    
    
      <category term="学习文章" scheme="https://zuoyoulai.github.io/tags/%E5%AD%A6%E4%B9%A0%E6%96%87%E7%AB%A0/"/>
    
      <category term="GitHub" scheme="https://zuoyoulai.github.io/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Go语言之 BeeGo 学习</title>
    <link href="https://zuoyoulai.github.io/2020/01/07/Go-BeeGo/"/>
    <id>https://zuoyoulai.github.io/2020/01/07/Go-BeeGo/</id>
    <published>2020-01-07T15:07:43.000Z</published>
    <updated>2020-01-25T14:27:26.417Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="go-yu-yan-zhi-beego-xue-xi">Go语言之 BeeGo 学习</span><a href="#go-yu-yan-zhi-beego-xue-xi" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#gopm-an-zhuang-cao-zuo">Gopm 安装操作</a></li></ul><!-- tocstop --></div><h3><span id="gopm-an-zhuang-cao-zuo">Gopm 安装操作</span><a href="#gopm-an-zhuang-cao-zuo" class="header-anchor"></a></h3><ul><li>go get -v github.com/gpmgo/gopm 没有反应,需要修改</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Mac 修改 host:</span><br><span class="line">&gt;&gt; sudo vi &#x2F;etc&#x2F;hosts</span><br><span class="line"></span><br><span class="line">添加内容:</span><br><span class="line"></span><br><span class="line">192.30.253.112 github.com</span><br><span class="line">151.101.185.194 github.global.ssl.fastly.net</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wq 退出</span><br></pre></td></tr></table></figure><ul><li>下载完之后可以执行 gopm get 来替代 go get 的操作:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">gopm get  -g -v github.com&#x2F;astaxie&#x2F;beego</span><br><span class="line">go get -v github.com&#x2F;astaxie&#x2F;beego</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gopm get -g -v github.com&#x2F;beego&#x2F;bee</span><br><span class="line">gopm get -g -v golang.org&#x2F;x&#x2F;net</span><br><span class="line">go get  -v golang.org&#x2F;x&#x2F;net</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">go get github.com&#x2F;beego&#x2F;bee</span><br><span class="line">go get -v github.com&#x2F;beego&#x2F;bee</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">go get -u  -v github.com&#x2F;kataras&#x2F;iris</span><br><span class="line"></span><br><span class="line">go get -u  -v github.com&#x2F;gin-gonic&#x2F;gin</span><br><span class="line"></span><br><span class="line">gopm get -v github.com&#x2F;kataras&#x2F;iris</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">go get -v github.com&#x2F;hyper-carrot&#x2F;go_lib&#x2F;logging</span><br><span class="line">go get -v github.com&#x2F;astaxie&#x2F;beego</span><br><span class="line">go get -v golang.org&#x2F;x&#x2F;net</span><br></pre></td></tr></table></figure><ul><li>发现以上的方式，访问 github.com 还是很慢，所以得修改成另外一种方式:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;www.github.com&#x2F;hunterhug&#x2F;rabbit</span><br><span class="line">mkdir -p %GOPATH%&#x2F;src&#x2F;github.com&#x2F;hunterhug</span><br><span class="line">mv rabbit %GOPATH%&#x2F;src&#x2F;github.com&#x2F;hunterhug</span><br></pre></td></tr></table></figure></li></ul><ul><li>修改 host 文件的内容，提高访问 github.com 的项目<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Mac 修改 host:</span><br><span class="line">&gt;&gt; sudo vi &#x2F;etc&#x2F;hosts</span><br><span class="line"></span><br><span class="line">添加内容:</span><br><span class="line"></span><br><span class="line">#github</span><br><span class="line">192.30.253.112 github.com</span><br><span class="line">192.30.253.120 codeload.github.com</span><br><span class="line">219.76.4.4 github-cloud.s3.amazonaws.com</span><br><span class="line">151.101.185.194 github.global.ssl.fastly.net</span><br><span class="line">151.101.24.133 assets-cdn.github.com</span><br><span class="line">151.101.196.133 avatars0.githubusercontent.com</span><br><span class="line">151.101.196.133 avatars1.githubusercontent.com</span><br><span class="line">103.245.222.133 assets-cdn.github.com</span><br><span class="line">204.232.175.78 documentcloud.github.com</span><br><span class="line">204.232.175.94 gist.github.com</span><br><span class="line">107.21.116.220 help.github.com</span><br><span class="line">207.97.227.252 nodeload.github.com</span><br><span class="line">199.27.76.130 raw.github.com</span><br><span class="line">107.22.3.110 status.github.com</span><br><span class="line">204.232.175.78 training.github.com</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      BeeGo 开始学习
    
    </summary>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/categories/Go/"/>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/tags/Go/"/>
    
      <category term="BeeGo" scheme="https://zuoyoulai.github.io/tags/BeeGo/"/>
    
  </entry>
  
  <entry>
    <title>Linux 用户权限权限管理</title>
    <link href="https://zuoyoulai.github.io/2020/01/02/Linux-authority/"/>
    <id>https://zuoyoulai.github.io/2020/01/02/Linux-authority/</id>
    <published>2020-01-02T08:29:54.000Z</published>
    <updated>2020-01-02T15:47:40.596Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="linux-yong-hu-quan-xian-quan-xian-guan-li">Linux 用户权限权限管理</span><a href="#linux-yong-hu-quan-xian-quan-xian-guan-li" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#chuang-jian-xin-yong-hu">创建新用户</a></li><li><a href="#yong-hu-dui-wen-jian-jia-wen-jian-cao-zuo-quan-xian">用户对文件夹,文件操作权限</a></li><li><a href="#li-zi-fu-yu-suo-you-zhe-hou-shan-chu-wen-jian-ze-quan-xian-bu-gou">例子 : 赋予所有者后删除文件则权限不够</a></li><li><a href="#li-zi-wu-mi-deng-lu-samlai-de-pu-tong-zhang-hao">例子 : 无秘登录 samlai 的普通账号</a></li></ul><!-- tocstop --></div><h3><span id="chuang-jian-xin-yong-hu">创建新用户</span><a href="#chuang-jian-xin-yong-hu" class="header-anchor"></a></h3><ul><li>以 root 用户为创建的基础</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.创建新的用户,名称为:samlai</span><br><span class="line">&gt;&gt;  useradd samlai</span><br><span class="line"></span><br><span class="line">2.添加 samlai 密码:</span><br><span class="line">&gt;&gt;  passwd samlai</span><br><span class="line">&gt;&gt;</span><br><span class="line">    更改用户 samlai 的密码 。</span><br><span class="line">    新的 密码：</span><br><span class="line">    重新输入新的 密码：</span><br><span class="line">    passwd：所有的身份验证令牌已经成功更新</span><br><span class="line">    </span><br><span class="line">    laihaoda123</span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line">3.切换到 samlai 用户:</span><br><span class="line">&gt;&gt; su samlai</span><br><span class="line"></span><br><span class="line">4.切换到 root 再进行修改 samlai 的密码</span><br><span class="line">&gt;&gt; su</span><br><span class="line">&gt;&gt; passwd samlai</span><br></pre></td></tr></table></figure><h3><span id="yong-hu-dui-wen-jian-jia-wen-jian-cao-zuo-quan-xian">用户对文件夹,文件操作权限</span><a href="#yong-hu-dui-wen-jian-jia-wen-jian-cao-zuo-quan-xian" class="header-anchor"></a></h3><ul><li>权限的说明:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-rw-rw-r-- 1 root root 22 1月   2 22:41 one.sh</span><br><span class="line"></span><br><span class="line">首字母类型:</span><br><span class="line">- : 文件</span><br><span class="line">d : 文件夹</span><br><span class="line">l : 链接</span><br><span class="line"></span><br><span class="line">后面9位字母代表:</span><br><span class="line">    r:4</span><br><span class="line">    w:2</span><br><span class="line">    x:1</span><br><span class="line"></span><br><span class="line">-rw(所属用户：root 权限)-rw(所属组: root 权限)r--(其他用户的权限)</span><br></pre></td></tr></table></figure><ul><li>修改权限操作:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x one.txt  对所属用户添加权限</span><br><span class="line">chmod g+w,o+w  one.txt  对所属组，其他用户添加写的权限</span><br></pre></td></tr></table></figure><ul><li>权限对文件的作用</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">r :  cat more head tail</span><br><span class="line">w :  vi echo  [注意:不包括删除文件]</span><br><span class="line">x :  可执行 </span><br><span class="line"></span><br><span class="line">[对文件来说可执行是最高的权限]</span><br></pre></td></tr></table></figure><ul><li>权限对目录的左右</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">r : ls</span><br><span class="line">w : touch rm mv cp [这里文件夹的写权限就可以针对于文件删除的操作]</span><br><span class="line">x : 可以进入目录 cd</span><br><span class="line"></span><br><span class="line">[对文件来说写操作是最高的权限]</span><br></pre></td></tr></table></figure><ul><li>修改文件的所有者:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">chown laihaoda one.txt</span><br></pre></td></tr></table></figure><ul><li>修改文件的所属组:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">chgrp samlai one.txt</span><br></pre></td></tr></table></figure><ul><li>查看默认权限命令</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">umask</span><br></pre></td></tr></table></figure><h3><span id="li-zi-fu-yu-suo-you-zhe-hou-shan-chu-wen-jian-ze-quan-xian-bu-gou">例子 : 赋予所有者后删除文件则权限不够</span><a href="#li-zi-fu-yu-suo-you-zhe-hou-shan-chu-wen-jian-ze-quan-xian-bu-gou" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;&gt; su </span><br><span class="line">&gt;&gt; ll</span><br><span class="line">总用量 4.0K</span><br><span class="line">-rwxrwxr-x 2 root root 4.0K 1月   2 22:41 one.sh</span><br><span class="line">&gt;&gt; chown samlai .&#x2F;one.sh</span><br><span class="line">&gt;&gt; ll</span><br><span class="line">总用量 4.0K</span><br><span class="line">-rw-rw-r-- 1 samlai root 22 1月   2 22:41 one.sh</span><br><span class="line">&gt;&gt; su samlai</span><br><span class="line">&gt;&gt; rm -rf one.sh</span><br><span class="line">rm: 无法删除&quot;one.sh&quot;: 权限不够</span><br><span class="line"></span><br><span class="line">[即使是所属者都无法删除权限，问题就是在于 : 文件所在的文件夹并不属于 samlai 根本原因: 文件夹与文件在分区的时候，是分开来,文件夹</span><br><span class="line">则管理着文件夹与其对应的文件名称,个数等之类。但所属者仅仅有对文件全部全部行为，除了删除。]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt; su </span><br><span class="line">把对应的文件夹所属者改成 samlai</span><br><span class="line">&gt;&gt; chown samlai ..&#x2F;one</span><br><span class="line">&gt;&gt; ll</span><br><span class="line">总用量 4.0K</span><br><span class="line">drwxrwxr-x 2 samlai root 4.0K 1月   2 22:41 one</span><br><span class="line">&gt;&gt; su samlai</span><br><span class="line">&gt;&gt; rm -rf one.sh</span><br><span class="line">这样就可以成功的删除了</span><br></pre></td></tr></table></figure><h3><span id="li-zi-wu-mi-deng-lu-samlai-de-pu-tong-zhang-hao">例子 : 无秘登录 samlai 的普通账号</span><a href="#li-zi-wu-mi-deng-lu-samlai-de-pu-tong-zhang-hao" class="header-anchor"></a></h3><ul><li>参考链接 : <a href="https://blog.csdn.net/lizhiyuan_eagle/article/details/80494512" target="_blank" rel="noopener">https://blog.csdn.net/lizhiyuan_eagle/article/details/80494512</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">A机器无密登录 B 机器的操作: ssh root@ipAddress</span><br><span class="line"></span><br><span class="line">2台机器 A 本地   B 远程:</span><br><span class="line"></span><br><span class="line">In A机器：</span><br><span class="line">1.yum install ssh</span><br><span class="line">2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub    &#x2F;&#x2F; id_rsa是私钥</span><br><span class="line"></span><br><span class="line">将这个公钥给机器 B 中</span><br><span class="line"></span><br><span class="line">In B机器命令:</span><br><span class="line"># touch &#x2F;home&#x2F;samlai&#x2F;.ssh&#x2F;authorized_keys (如果已经存在这个文件, 跳过这条)</span><br><span class="line"></span><br><span class="line">[新的用户: 没有 .ssh 目录 则需要创建]</span><br><span class="line"></span><br><span class="line">&gt;&gt; mkdir ~&#x2F;.ssh</span><br><span class="line"></span><br><span class="line"># cat &#x2F;home&#x2F;samlai&#x2F;.ssh&#x2F;id_rsa.pub &gt;&gt; &#x2F;home&#x2F;samlai&#x2F;.ssh&#x2F;authorized_keys (将id_rsa.pub的内容追加到authorized_keys 中)</span><br><span class="line"></span><br><span class="line">samalai&#x2F;.ssh和authorized_keys的权限</span><br><span class="line"></span><br><span class="line">#chmod 700 samlai</span><br><span class="line"></span><br><span class="line">#chmod 700 .ssh</span><br><span class="line"></span><br><span class="line">#chmod 600 authorized_keys</span><br><span class="line"></span><br><span class="line">回到A机器:</span><br><span class="line"># ssh samlai@192.168.60.110 (不需要密码, 登录成功)</span><br><span class="line"></span><br><span class="line">测试成功！！！</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Linux 用户权限权限管理
    
    </summary>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Go 指针,数组,切片,Map</title>
    <link href="https://zuoyoulai.github.io/2020/01/02/Go-Struct1/"/>
    <id>https://zuoyoulai.github.io/2020/01/02/Go-Struct1/</id>
    <published>2020-01-02T02:25:02.000Z</published>
    <updated>2020-01-02T02:36:57.846Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="go-zhi-zhen-shu-zu-qie-pian-map">Go 指针,数组,切片,Map</span><a href="#go-zhi-zhen-shu-zu-qie-pian-map" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#zhi-zhen">指针</a></li><li><a href="#shu-zu">数组</a></li><li><a href="#qie-pian-slice">切片: slice</a></li><li><a href="#map">Map</a></li></ul><!-- tocstop --></div><blockquote><p>Go 引用的方式只有一种 : 值传递</p></blockquote><h3><span id="zhi-zhen">指针</span><a href="#zhi-zhen" class="header-anchor"></a></h3><ul><li>Go语言的指针是不能进行运算的</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Go 指针:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1.值,引用传递:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  值: 值进行拷贝</span></span><br><span class="line"><span class="comment">  引入: 地址的引用</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2.Go 引用的方式只有一种 : 值传递</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a,b :=<span class="number">1</span>, <span class="number">100</span></span><br><span class="line">swap(&amp;a, &amp;b)</span><br><span class="line">fmt.Printf(<span class="string">"指针打印的 swap : a = %d  b = %d\n"</span>,a,b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d,c :=<span class="number">9</span>, <span class="number">88</span></span><br><span class="line">d,c =swapK(d, c)</span><br><span class="line">fmt.Printf(<span class="string">"返回多个值 swap :  d = %d  c = %d\n"</span>,d,c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">打印:</span></span><br><span class="line"><span class="comment">指针打印的 swap : a = 100  b = 1</span></span><br><span class="line"><span class="comment">返回多个值 swap :  d = 9  c = 88</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">指针操作的2数互换</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a,b *<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">*a,*b=*b,*a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapK</span><span class="params">(a,b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> b, a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="shu-zu">数组</span><a href="#shu-zu" class="header-anchor"></a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">数组：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. 定义数组</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2. 遍历数组</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3. range 遍历</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">4. 数组是值类型: 值拷贝</span></span><br><span class="line"><span class="comment">       在数组进行轮询的时候对某些角标值修改值的时候,因为数组是类型,是值拷贝,不会影响数组原来的值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   如果需要引用的话,可以加指针操作</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">5. go语言一般不使用数组,是切片</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="keyword">var</span> arr1 [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">arr2 := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">arr3 := [...]<span class="keyword">int</span>&#123;<span class="number">10</span>, <span class="number">21</span>, <span class="number">33</span>, <span class="number">49</span>, <span class="number">54</span>&#125;</span><br><span class="line"><span class="keyword">var</span> grid [<span class="number">4</span>][<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PrintArr(arr1)</span><br><span class="line"></span><br><span class="line">PrintArr(arr3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印内容</span></span><br><span class="line">fmt.Println(arr1,<span class="string">"  "</span>,arr2,<span class="string">"  "</span>, arr3,<span class="string">"  "</span>, grid)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 range 打印 index value</span></span><br><span class="line"><span class="keyword">for</span> i,v:=<span class="keyword">range</span> arr3 &#123;</span><br><span class="line">fmt.Println(i, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果只需要值的可以这样遍历</span></span><br><span class="line"><span class="keyword">for</span> _,v:=<span class="keyword">range</span> arr3 &#123;</span><br><span class="line">fmt.Println(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">打印结果:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">100</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">100</span></span><br><span class="line"><span class="comment">21</span></span><br><span class="line"><span class="comment">33</span></span><br><span class="line"><span class="comment">49</span></span><br><span class="line"><span class="comment">54</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">[0 0 0 0 0]    [1 2 3]    [10 21 33 49 54]    [[0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0]]</span></span><br><span class="line"><span class="comment">0 10</span></span><br><span class="line"><span class="comment">1 21</span></span><br><span class="line"><span class="comment">2 33</span></span><br><span class="line"><span class="comment">3 49</span></span><br><span class="line"><span class="comment">4 54</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">10</span></span><br><span class="line"><span class="comment">21</span></span><br><span class="line"><span class="comment">33</span></span><br><span class="line"><span class="comment">49</span></span><br><span class="line"><span class="comment">54</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintArr</span><span class="params">(arr [5]<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="keyword">range</span> arr &#123;</span><br><span class="line"><span class="comment">//数组是值传递 即使修改了值也改变不了原来的数组内容</span></span><br><span class="line"><span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">arr[i]= <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(arr[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="qie-pian-slice">切片: slice</span><a href="#qie-pian-slice" class="header-anchor"></a></h3><ul><li>simpleSliceTest.go</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Go 语言很重要部分: Slice</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. slice 扩展</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2. 向slice添加元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr := [...]<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">23</span>, <span class="number">392</span>, <span class="number">22</span>, <span class="number">9</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="comment">//半开半闭区间操作:</span></span><br><span class="line"><span class="comment">//arr[2:5]  --&gt; arr[2] ... arr[4]</span></span><br><span class="line"><span class="comment">//故结果: [392 22 9]</span></span><br><span class="line">fmt.Println(arr[<span class="number">2</span>:<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1:=arr[<span class="number">2</span>:]</span><br><span class="line">fmt.Println(s1)</span><br><span class="line">updateArr(s1)</span><br><span class="line">fmt.Println(s1)</span><br><span class="line"></span><br><span class="line">s2:=arr[:]</span><br><span class="line">fmt.Println(s2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">打印:</span></span><br><span class="line"><span class="comment">[392 22 9]</span></span><br><span class="line"><span class="comment">[392 22 9 4]</span></span><br><span class="line"><span class="comment">[99 22 9 4]</span></span><br><span class="line"><span class="comment">[2 23 99 22 9 4]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//slice 扩展</span></span><br><span class="line"><span class="keyword">var</span> sa = []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>,&#125;</span><br><span class="line">fmt.Println(sa)</span><br><span class="line">ss1:=sa[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">ss2:=ss1[<span class="number">3</span>:<span class="number">5</span>]</span><br><span class="line">fmt.Println(<span class="string">"ss1  :  "</span>,ss1)</span><br><span class="line">fmt.Println(<span class="string">"ss2  :  "</span>,ss2)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">[0 1 2 3 4 5 6 7]</span></span><br><span class="line"><span class="comment">ss1  :   [2 3 4 5]</span></span><br><span class="line"><span class="comment">ss2  :   [5 6]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">slice 可以向后扩展 不可以向前扩展</span></span><br><span class="line"><span class="comment">s[i] 不可以超越len(s),向后扩展不可以超越底层数组 cap(s)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印相应的 caps</span></span><br><span class="line">fmt.Printf(<span class="string">"ss1 = %v, len(ss1) = %d , cap(ss1) = %d \n"</span>,ss1,<span class="built_in">len</span>(ss1),<span class="built_in">cap</span>(ss1))</span><br><span class="line">fmt.Printf(<span class="string">"ss2 = %v, len(ss2) = %d , cap(ss2) = %d \n"</span>,ss2,<span class="built_in">len</span>(ss2),<span class="built_in">cap</span>(ss2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">ss1 = [2 3 4 5], len(ss1) = 4 , cap(ss1) = 6</span></span><br><span class="line"><span class="comment">ss2 = [5 6], len(ss2) = 2 , cap(ss2) = 3</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateArr</span><span class="params">(arr []<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">arr[<span class="number">0</span>]= <span class="number">99</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>doSlice.go</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">操作 slice:</span></span><br><span class="line"><span class="comment">1. append 添加元素</span></span><br><span class="line"><span class="comment">2. copy slice</span></span><br><span class="line"><span class="comment">3. delete one element from slice</span></span><br><span class="line"><span class="comment">4. remove from head and tail</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr []<span class="keyword">int</span></span><br><span class="line">PrintSlice(arr)</span><br><span class="line"><span class="comment">//arr = [], len(arr) = 0 , cap(arr) = 0</span></span><br><span class="line">fmt.Println(<span class="string">"append element"</span>)</span><br><span class="line">arr =<span class="built_in">append</span>(arr, <span class="number">10</span>,<span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">PrintSlice(arr)</span><br><span class="line"><span class="comment">// arr = [10 20 30], len(arr) = 3 , cap(arr) = 4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//手动的创建 slice</span></span><br><span class="line">arr1 :=<span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">16</span>)</span><br><span class="line">PrintSlice(arr1)</span><br><span class="line"><span class="comment">//arr = [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 16 , cap(arr) = 16</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr2 :=<span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">16</span>, <span class="number">25</span>)</span><br><span class="line">PrintSlice(arr2)</span><br><span class="line"><span class="comment">//arr = [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 16 , cap(arr) = 25</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"copy slice"</span>)</span><br><span class="line"><span class="built_in">copy</span>(arr1, arr)</span><br><span class="line">PrintSlice(arr1)</span><br><span class="line"><span class="comment">//arr = [10 20 30 0 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 16 , cap(arr) = 16</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"delete one element from slice"</span>)</span><br><span class="line"><span class="comment">//删掉上面的30元素,index =2</span></span><br><span class="line">arr1=<span class="built_in">append</span>(arr1[:<span class="number">2</span>],arr1[<span class="number">3</span>:]...)</span><br><span class="line">PrintSlice(arr1)</span><br><span class="line"><span class="comment">//arr = [10 20 0 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 15 , cap(arr) = 16</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"remove from head and tail"</span>)</span><br><span class="line">arr1=arr1[<span class="number">1</span>:]</span><br><span class="line">PrintSlice(arr1)</span><br><span class="line"><span class="comment">//arr = [20 0 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 14 , cap(arr) = 15</span></span><br><span class="line">arr1=arr1[:<span class="built_in">len</span>(arr1)<span class="number">-1</span>]</span><br><span class="line">PrintSlice(arr1)</span><br><span class="line"><span class="comment">//arr = [20 0 0 0 0 0 0 0 0 0 0 0 0], len(arr) = 13 , cap(arr) = 15</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintSlice</span><span class="params">(arr []<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">fmt.Printf(<span class="string">"arr = %v, len(arr) = %d , cap(arr) = %d \n"</span>,arr,<span class="built_in">len</span>(arr),<span class="built_in">cap</span>(arr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="map">Map</span><a href="#map" class="header-anchor"></a></h3><ul><li>DoGoMap.go</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Map :</span></span><br><span class="line"><span class="comment">1.创建方式: 这个是 HashMap 类型</span></span><br><span class="line"><span class="comment">m:=map[string]string&#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">m:=make(map[string]int)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2.获取元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3.判断元素是否存在 if</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">4.删除某个元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">5.range 遍历</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">6.key 类型:</span></span><br><span class="line"><span class="comment">      除了 slice map function 内建类型都可以作为 key</span></span><br><span class="line"><span class="comment">      struct类型不包含上述字段，也可以作为 key</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 map</span></span><br><span class="line">m:=<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加元素</span></span><br><span class="line">m[<span class="string">"lai"</span>]= <span class="string">"Lai"</span></span><br><span class="line">m[<span class="string">"hao"</span>]= <span class="string">"Hao"</span></span><br><span class="line">m[<span class="string">"da"</span>]= <span class="string">"Da"</span></span><br><span class="line"></span><br><span class="line">PrintMap(m)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">lai Lai</span></span><br><span class="line"><span class="comment">hao Hao</span></span><br><span class="line"><span class="comment">da Da</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除元素</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"lai"</span>)</span><br><span class="line">PrintMap(m)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">hao Hao</span></span><br><span class="line"><span class="comment">da Da</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改元素</span></span><br><span class="line">m[<span class="string">"hao"</span>]= <span class="string">"HAhahaha.."</span></span><br><span class="line">PrintMap(m)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">hao HAhahaha..</span></span><br><span class="line"><span class="comment">da Da</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断元素是否存在</span></span><br><span class="line">key,ok:=m[<span class="string">"da"</span>]</span><br><span class="line">fmt.Println(key, ok)</span><br><span class="line"><span class="comment">// Da true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> key,ok:=m[<span class="string">"da"</span>]; ok &#123;</span><br><span class="line">fmt.Println(<span class="string">"存在此 key  "</span>,key)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"don't have key %s  exist"</span>, key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//存在此 key   Da</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintMap</span><span class="params">(m <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span></span>  &#123;</span><br><span class="line"><span class="keyword">for</span> k,v :=<span class="keyword">range</span> m &#123;</span><br><span class="line">fmt.Println(k,v)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Go 数组,切片,Map
    
    </summary>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/categories/Go/"/>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>每天学习一个 Linux 指令 1  scp</title>
    <link href="https://zuoyoulai.github.io/2020/01/01/Linux-scp/"/>
    <id>https://zuoyoulai.github.io/2020/01/01/Linux-scp/</id>
    <published>2020-01-01T02:55:57.000Z</published>
    <updated>2020-01-01T05:04:29.917Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="mei-tian-xue-xi-yi-ge-linux-zhi-ling-1-scp">每天学习一个 Linux 指令 1 : scp</span><a href="#mei-tian-xue-xi-yi-ge-linux-zhi-ling-1-scp" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#shuo-ming">说明</a></li><li><a href="#ming-ling-ge-shi">命令格式</a><ul><li><a href="#escape-figure-class-highlight-plain-table-tr-td-class-gutter-pre-span-class-line-1-span-br-span-class-line-2-span-br-pre-td-td-class-code-pre-span-class-line-span-br-span-class-line-scp-can-shu-yuan-lu-jing-mu-biao-lu-jing-span-br-pre-td-tr-table-figure-escape"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp [参数] [源路径] [目标路径]</span><br></pre></td></tr></table></figure></a></li></ul></li><li><a href="#ming-ling-can-shu">命令参数</a><ul><li><a href="#shi-li">实例</a></li></ul></li><li><a href="#fu-zhi-wen-jian">复制文件</a></li><li><a href="#fu-zhi-mu-lu">复制目录</a><ul><li><a href="#escape-figure-class-highlight-plain-table-tr-td-class-gutter-pre-span-class-line-1-span-br-span-class-line-2-span-br-span-class-line-3-span-br-pre-td-td-class-code-pre-span-class-line-span-br-span-class-line-scp-r-local-folder-remote-username-remote-ip-remote-folder-zhi-ding-liao-yong-hu-ming-ming-ling-zhi-xing-hou-xu-yao-shu-ru-yong-hu-mi-ma-span-br-span-class-line-scp-r-local-folder-remote-ip-remote-folder-mei-you-zhi-ding-yong-hu-ming-ming-ling-zhi-xing-hou-xu-yao-shu-ru-yong-hu-ming-he-mi-ma-span-br-pre-td-tr-table-figure-escape"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder  :  指定了用户名，命令执行后需要输入用户密码 </span><br><span class="line">scp -r local_folder remote_ip:remote_folder   :    没有指定用户名，命令执行后需要输入用户名和密码</span><br></pre></td></tr></table></figure></a></li></ul></li><li><a href="#cong-yuan-cheng-fu-wu-qi-fu-zhi-dao-ben-di-fu-wu-qi">从远程服务器复制到本地服务器</a><ul><li><a href="#escape-figure-class-highlight-plain-table-tr-td-class-gutter-pre-span-class-line-1-span-br-span-class-line-2-span-br-pre-td-td-class-code-pre-span-class-line-span-br-span-class-line-cong-yuan-cheng-fu-zhi-dao-ben-di-de-scp-ming-ling-yu-shang-mian-de-ming-ling-lei-tong-zhi-yao-jiang-cong-ben-di-fu-zhi-dao-yuan-cheng-de-ming-ling-hou-mian-2-ge-can-shu-hu-huan-shun-xu-jiu-xing-liao-span-br-pre-td-tr-table-figure-escape"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">从远程复制到本地的scp命令与上面的命令雷同，只要将从本地复制到远程的命令后面2个参数互换顺序就行了。</span><br></pre></td></tr></table></figure></a></li></ul></li><li><a href="#li-zi-1-cong-yuan-chu-fu-zhi-wen-jian-dao-ben-di-mu-lu">例子 1 :  从远处复制文件到本地目录</a><ul><li><a href="#escape-figure-class-highlight-plain-table-tr-td-class-gutter-pre-span-class-line-1-span-br-span-class-line-2-span-br-span-class-line-3-span-br-span-class-line-4-span-br-pre-td-td-class-code-pre-span-class-line-span-br-span-class-line-scp-root-192-168-120-204-x2f-opt-x2f-soft-x2f-nginx-0-5-38-tar-gz-x2f-opt-x2f-soft-x2f-span-br-span-class-line-span-br-span-class-line-cong-192-168-120-204-ji-qi-shang-de-x2f-opt-x2f-soft-x2f-de-mu-lu-zhong-xia-zai-nginx-0-5-38-tar-gz-wen-jian-dao-ben-di-x2f-opt-x2f-soft-x2f-mu-lu-zhong-span-br-pre-td-tr-table-figure-escape"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;nginx-0.5.38.tar.gz &#x2F;opt&#x2F;soft&#x2F;</span><br><span class="line"></span><br><span class="line">从192.168.120.204机器上的&#x2F;opt&#x2F;soft&#x2F;的目录中下载nginx-0.5.38.tar.gz 文件到本地&#x2F;opt&#x2F;soft&#x2F;目录中</span><br></pre></td></tr></table></figure></a></li></ul></li><li><a href="#li-zi-2-cong-yuan-chu-fu-zhi-dao-ben-di">例子 2 :  从远处复制到本地</a></li><li><a href="#li-zi-3-shang-chuan-ben-di-wen-jian-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu">例子 3 :  上传本地文件到远程机器指定目录</a></li><li><a href="#li-zi-4-shang-chuan-ben-di-mu-lu-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu">例子 4 :  上传本地目录到远程机器指定目录</a></li><li><a href="#li-zi-5-cong-yuan-chu-mu-lu-dao-ben-di-zhi-ding-mu-lu-ssh-key">例子 5 :  从远处目录到本地指定目录 + ssh key</a><ul><li><a href="#escape-figure-class-highlight-plain-table-tr-td-class-gutter-pre-span-class-line-1-span-br-span-class-line-2-span-br-span-class-line-3-span-br-span-class-line-4-span-br-span-class-line-5-span-br-span-class-line-6-span-br-span-class-line-7-span-br-span-class-line-8-span-br-span-class-line-9-span-br-span-class-line-10-span-br-span-class-line-11-span-br-span-class-line-12-span-br-span-class-line-13-span-br-span-class-line-14-span-br-span-class-line-15-span-br-span-class-line-16-span-br-span-class-line-17-span-br-span-class-line-18-span-br-span-class-line-19-span-br-span-class-line-20-span-br-span-class-line-21-span-br-span-class-line-22-span-br-span-class-line-23-span-br-span-class-line-24-span-br-pre-td-td-class-code-pre-span-class-line-span-br-span-class-line-span-br-span-class-line-a-ji-qi-wu-mi-deng-lu-b-ji-qi-de-cao-zuo-ssh-root-ipaddress-span-br-span-class-line-span-br-span-class-line-2-tai-ji-qi-a-ben-di-b-yuan-cheng-span-br-span-class-line-span-br-span-class-line-in-a-ji-qi-span-br-span-class-line-1-yum-install-ssh-span-br-span-class-line-2-ssh-keygen-t-rsa-c-quot-472023527-qq-com-quot-span-br-span-class-line-3-cat-x2f-ssh-x2f-id-rsa-pub-x2f-x2f-id-rsa-shi-si-yao-span-br-span-class-line-span-br-span-class-line-jiang-zhe-ge-gong-yao-gei-ji-qi-b-zhong-span-br-span-class-line-span-br-span-class-line-span-br-span-class-line-in-b-ji-qi-span-br-span-class-line-jin-ru-x2f-root-x2f-ssh-x2f-mu-lu-zhong-jiang-a-ji-qi-de-gong-yao-gei-fu-zhi-dao-b-qi-wen-jian-sam-pub-span-br-span-class-line-ran-hou-zhi-xing-zhi-ling-span-br-span-class-line-span-br-span-class-line-gt-gt-cat-sam-pub-gt-gt-x2f-root-x2f-ssh-x2f-authorized-keys-jiang-id-rsa-pub-de-nei-rong-zhui-jia-dao-authorized-keys-zhong-span-br-span-class-line-span-br-span-class-line-span-br-span-class-line-jie-xia-lai-jiu-ke-yi-zhi-xing-scp-de-cao-zuo-liao-span-br-span-class-line-span-br-span-class-line-scp-r-root-192-168-120-204-x2f-opt-x2f-soft-x2f-mongodb-x2f-opt-x2f-soft-x2f-span-br-pre-td-tr-table-figure-escape"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">A机器无密登录 B 机器的操作: ssh root@ipAddress</span><br><span class="line"></span><br><span class="line">2台机器 A 本地   B 远程:</span><br><span class="line"></span><br><span class="line">In A机器：</span><br><span class="line">1.yum install ssh</span><br><span class="line">2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub    &#x2F;&#x2F; id_rsa是私钥</span><br><span class="line"></span><br><span class="line">将这个公钥给机器 B 中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In B机器:</span><br><span class="line">进入&#x2F;root&#x2F;.ssh&#x2F;目录中 将 A 机器的公钥给复制到 B 器文件 : sam.pub</span><br><span class="line">然后执行指令:</span><br><span class="line"></span><br><span class="line">&gt;&gt; cat sam.pub &gt;&gt; &#x2F;root&#x2F;.ssh&#x2F;authorized_keys (将id_rsa.pub的内容追加到authorized_keys 中)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">接下来就可以执行 scp 的操作了:</span><br><span class="line"></span><br><span class="line">scp -r root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;mongodb &#x2F;opt&#x2F;soft&#x2F;</span><br></pre></td></tr></table></figure></a></li><li><a href="#can-kao-wen-zhang">参考文章</a></li></ul></li></ul><!-- tocstop --></div><h3><span id="shuo-ming">说明</span><a href="#shuo-ming" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，</span><br><span class="line">不过cp只是在本机进行拷贝不能跨服务器，而且scp传输是加密的。可能会稍微影响一下速度。当你服务器硬盘变</span><br><span class="line">为只读 read only system时，用scp可以帮你把文件移出来。另外，scp还非常不占资源，不会提高多少系统</span><br><span class="line">负荷，在这一点上，rsync就远远不及它了。虽然 rsync比scp会快一点，但当小文件众多的情况下，rsync会</span><br><span class="line">导致硬盘I&#x2F;O非常高，而scp基本不影响系统正常使用。</span><br><span class="line"></span><br><span class="line">scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。linux的scp命令可以在linux服务器之间复制文件和目录。</span><br></pre></td></tr></table></figure><hr><h3><span id="ming-ling-ge-shi">命令格式</span><a href="#ming-ling-ge-shi" class="header-anchor"></a></h3><ul><li>格式:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp [参数] [源路径] [目标路径]</span><br></pre></td></tr></table></figure><hr><h3><span id="ming-ling-can-shu">命令参数</span><a href="#ming-ling-can-shu" class="header-anchor"></a></h3><ul><li>参数:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp [参数] [源路径] [目标路径]</span><br><span class="line"></span><br><span class="line">这里的参数:</span><br><span class="line"></span><br><span class="line">-1  强制scp命令使用协议ssh1  </span><br><span class="line"></span><br><span class="line">-2  强制scp命令使用协议ssh2  </span><br><span class="line"></span><br><span class="line">-4  强制scp命令只使用IPv4寻址  </span><br><span class="line"></span><br><span class="line">-6  强制scp命令只使用IPv6寻址  </span><br><span class="line"></span><br><span class="line">-B  使用批处理模式（传输过程中不询问传输口令或短语）  </span><br><span class="line"></span><br><span class="line">-C  允许压缩。（将-C标志传递给ssh，从而打开压缩功能）  </span><br><span class="line"></span><br><span class="line">-p 保留原文件的修改时间，访问时间和访问权限。  </span><br><span class="line"></span><br><span class="line">-q  不显示传输进度条。  </span><br><span class="line"></span><br><span class="line">-r  递归复制整个目录。  </span><br><span class="line"></span><br><span class="line">-v 详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。   </span><br><span class="line"></span><br><span class="line">-c cipher  以cipher将数据传输进行加密，这个选项将直接传递给ssh。   </span><br><span class="line"></span><br><span class="line">-F ssh_config  指定一个替代的ssh配置文件，此参数直接传递给ssh。  </span><br><span class="line"></span><br><span class="line">-i identity_file  从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。    </span><br><span class="line"></span><br><span class="line">-l limit  限定用户所能使用的带宽，以Kbit&#x2F;s为单位。     </span><br><span class="line"></span><br><span class="line">-o ssh_option  如果习惯于使用ssh_config(5)中的参数传递方式，   </span><br><span class="line"></span><br><span class="line">-P port  注意是大写的P, port是指定数据传输用到的端口号   </span><br><span class="line"></span><br><span class="line">-S program  指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。</span><br></pre></td></tr></table></figure></li></ul><hr><h2><span id="shi-li">实例</span><a href="#shi-li" class="header-anchor"></a></h2><h3><span id="fu-zhi-wen-jian">复制文件</span><a href="#fu-zhi-wen-jian" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">命令执行后需要输入用户密码，第1个仅指定了远程的目录，文件名字不变，第2个指定了文件名:</span><br><span class="line">1. scp local_file remote_username@remote_ip:remote_folder</span><br><span class="line">2. scp local_file remote_username@remote_ip:remote_file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第3,4个没有指定用户名，命令执行后需要输入用户名和密码，第3个仅指定了远程的目录，文件名字不变，第4个指定了文件名</span><br><span class="line">3. scp local_file remote_ip:remote_folder  </span><br><span class="line">4. scp local_file remote_ip:remote_file</span><br></pre></td></tr></table></figure><hr><h3><span id="fu-zhi-mu-lu">复制目录</span><a href="#fu-zhi-mu-lu" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder  :  指定了用户名，命令执行后需要输入用户密码 </span><br><span class="line">scp -r local_folder remote_ip:remote_folder   :    没有指定用户名，命令执行后需要输入用户名和密码</span><br></pre></td></tr></table></figure><hr><h3><span id="cong-yuan-cheng-fu-wu-qi-fu-zhi-dao-ben-di-fu-wu-qi">从远程服务器复制到本地服务器</span><a href="#cong-yuan-cheng-fu-wu-qi-fu-zhi-dao-ben-di-fu-wu-qi" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">从远程复制到本地的scp命令与上面的命令雷同，只要将从本地复制到远程的命令后面2个参数互换顺序就行了。</span><br></pre></td></tr></table></figure><hr><h3><span id="li-zi-1-cong-yuan-chu-fu-zhi-wen-jian-dao-ben-di-mu-lu">例子 1 :  从远处复制文件到本地目录</span><a href="#li-zi-1-cong-yuan-chu-fu-zhi-wen-jian-dao-ben-di-mu-lu" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;nginx-0.5.38.tar.gz &#x2F;opt&#x2F;soft&#x2F;</span><br><span class="line"></span><br><span class="line">从192.168.120.204机器上的&#x2F;opt&#x2F;soft&#x2F;的目录中下载nginx-0.5.38.tar.gz 文件到本地&#x2F;opt&#x2F;soft&#x2F;目录中</span><br></pre></td></tr></table></figure><hr><h3><span id="li-zi-2-cong-yuan-chu-fu-zhi-dao-ben-di">例子 2 :  从远处复制到本地</span><a href="#li-zi-2-cong-yuan-chu-fu-zhi-dao-ben-di" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;mongodb &#x2F;opt&#x2F;soft&#x2F;</span><br><span class="line"></span><br><span class="line">从192.168.120.204机器上的&#x2F;opt&#x2F;soft&#x2F;中下载mongodb 目录到本地的&#x2F;opt&#x2F;soft&#x2F;目录来。</span><br></pre></td></tr></table></figure><hr><h3><span id="li-zi-3-shang-chuan-ben-di-wen-jian-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu">例子 3 :  上传本地文件到远程机器指定目录</span><a href="#li-zi-3-shang-chuan-ben-di-wen-jian-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp &#x2F;opt&#x2F;soft&#x2F;nginx-0.5.38.tar.gz root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;scptest</span><br><span class="line"></span><br><span class="line">复制本地opt&#x2F;soft&#x2F;目录下的文件nginx-0.5.38.tar.gz 到远程机器192.168.120.204的opt&#x2F;soft&#x2F;scptest目录</span><br></pre></td></tr></table></figure><hr><h3><span id="li-zi-4-shang-chuan-ben-di-mu-lu-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu">例子 4 :  上传本地目录到远程机器指定目录</span><a href="#li-zi-4-shang-chuan-ben-di-mu-lu-dao-yuan-cheng-ji-qi-zhi-ding-mu-lu" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r &#x2F;opt&#x2F;soft&#x2F;mongodb root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;scptes</span><br><span class="line"></span><br><span class="line">上传本地目录 &#x2F;opt&#x2F;soft&#x2F;mongodb到远程机器192.168.120.204上&#x2F;opt&#x2F;soft&#x2F;scptest的目录中去</span><br></pre></td></tr></table></figure><hr><h3><span id="li-zi-5-cong-yuan-chu-mu-lu-dao-ben-di-zhi-ding-mu-lu-ssh-key">例子 5 :  从远处目录到本地指定目录 + ssh key</span><a href="#li-zi-5-cong-yuan-chu-mu-lu-dao-ben-di-zhi-ding-mu-lu-ssh-key" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">A机器无密登录 B 机器的操作: ssh root@ipAddress</span><br><span class="line"></span><br><span class="line">2台机器 A 本地   B 远程:</span><br><span class="line"></span><br><span class="line">In A机器：</span><br><span class="line">1.yum install ssh</span><br><span class="line">2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub    &#x2F;&#x2F; id_rsa是私钥</span><br><span class="line"></span><br><span class="line">将这个公钥给机器 B 中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In B机器:</span><br><span class="line">进入&#x2F;root&#x2F;.ssh&#x2F;目录中 将 A 机器的公钥给复制到 B 器文件 : sam.pub</span><br><span class="line">然后执行指令:</span><br><span class="line"></span><br><span class="line">&gt;&gt; cat sam.pub &gt;&gt; &#x2F;root&#x2F;.ssh&#x2F;authorized_keys (将id_rsa.pub的内容追加到authorized_keys 中)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">接下来就可以执行 scp 的操作了:</span><br><span class="line"></span><br><span class="line">scp -r root@192.168.120.204:&#x2F;opt&#x2F;soft&#x2F;mongodb &#x2F;opt&#x2F;soft&#x2F;</span><br></pre></td></tr></table></figure><hr><h2><span id="can-kao-wen-zhang">参考文章</span><a href="#can-kao-wen-zhang" class="header-anchor"></a></h2><ul><li>来自 : <a href="https://www.cnblogs.com/peida/archive/2013/03/15/2960802.html" target="_blank" rel="noopener">https://www.cnblogs.com/peida/archive/2013/03/15/2960802.html</a></li><li>ssh无秘登录的操作 : <a href="https://blog.csdn.net/lizhiyuan_eagle/article/details/80494512" target="_blank" rel="noopener">https://blog.csdn.net/lizhiyuan_eagle/article/details/80494512</a></li></ul>]]></content>
    
    <summary type="html">
    
      每天学习一个 Linux 指令  scp
    
    </summary>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Git使用内容</title>
    <link href="https://zuoyoulai.github.io/2019/12/31/Git-md/"/>
    <id>https://zuoyoulai.github.io/2019/12/31/Git-md/</id>
    <published>2019-12-31T09:17:19.000Z</published>
    <updated>2019-12-31T09:55:29.769Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="git-shi-yong">Git 使用</span><a href="#git-shi-yong" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#tian-jia-yong-hu-ji-ben-xin-xi">添加用户基本信息</a></li><li><a href="#shan-diao-ben-di-or-yuan-cheng-fen-zhi">删掉本地 Or 远程分支</a></li><li><a href="#ben-di-sheng-cheng-key-xie-ru-github-zhong-sshkey-fang-bian-ti-jiao-dai-ma">本地生成 key 写入 GitHub 中 sshkey 方便提交代码</a></li><li><a href="#cherry-pick-zhi-geng-xin-mou-ge-commit-de-li-mian-nei-rong">cherry-pick : 只更新某个 commit 的里面内容</a></li><li><a href="#hui-gun-dao-zhi-qian-mou-ge-fen-zhi">回滚到之前某个分支</a></li><li><a href="#qiang-xing-fu-gai-de-zui-xin-de-nei-rong">强行覆盖的最新的内容</a></li><li><a href="#bei-fen-xiang-mu-xiang-mu-tong-shi-tui-song-dao-githhub-yu-coding">备份项目 :  项目同时推送到githhub与coding</a></li></ul><!-- tocstop --></div><h3><span id="tian-jia-yong-hu-ji-ben-xin-xi">添加用户基本信息</span><a href="#tian-jia-yong-hu-ji-ben-xin-xi" class="header-anchor"></a></h3><ul><li>可以让本地提交的内容有相应的用户,这样就看 git log 的时候则会出现什么用户提交过了,而不是某个邮箱地址内容提交</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git config --global user.name &quot;xxxx@qq.com&quot;</span><br><span class="line">git config --global user.email &quot;xxx@qq.com&quot;</span><br></pre></td></tr></table></figure><hr><h3><span id="shan-diao-ben-di-or-yuan-cheng-fen-zhi">删掉本地 Or 远程分支</span><a href="#shan-diao-ben-di-or-yuan-cheng-fen-zhi" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">删除分支：git branch -d &lt;name&gt;</span><br><span class="line"></span><br><span class="line">删除远程分支：git push origin --delete &lt;name&gt;</span><br></pre></td></tr></table></figure><hr><h3><span id="ben-di-sheng-cheng-key-xie-ru-github-zhong-sshkey-fang-bian-ti-jiao-dai-ma">本地生成 key 写入 GitHub 中 sshkey 方便提交代码</span><a href="#ben-di-sheng-cheng-key-xie-ru-github-zhong-sshkey-fang-bian-ti-jiao-dai-ma" class="header-anchor"></a></h3><ul><li>github添加一个ssh key</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Linux:</span><br><span class="line"></span><br><span class="line">1.yum install ssh</span><br><span class="line">2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub  [复制粘贴到github头像那边的setting再进行添加相应的key值]</span><br><span class="line">4.以后进行git操作的代码的时候则不是git https:&#x2F;&#x2F;xxx的方式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Windows:</span><br><span class="line"></span><br><span class="line">1. 安装git，桌面右键点击 &quot;Git Bash&quot;</span><br><span class="line">2. cd ~&#x2F;.ssh&#x2F; </span><br><span class="line">3. vi id_rsa.pub  如有 复制内容，在github.com的网站上到ssh密钥管理页面，添加新公钥</span><br><span class="line">4. 如没有自行创建公钥</span><br></pre></td></tr></table></figure><hr><h3><span id="cherry-pick-zhi-geng-xin-mou-ge-commit-de-li-mian-nei-rong">cherry-pick : 只更新某个 commit 的里面内容</span><a href="#cherry-pick-zhi-geng-xin-mou-ge-commit-de-li-mian-nei-rong" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">将A分支的一个commit合并到B分支：</span><br><span class="line"> </span><br><span class="line">首先切换到A分支</span><br><span class="line"> </span><br><span class="line">git checkout A</span><br><span class="line"> </span><br><span class="line">git log</span><br><span class="line"> </span><br><span class="line">找出要合并的commit ID :</span><br><span class="line"> </span><br><span class="line">例如</span><br><span class="line"> </span><br><span class="line">xxx001</span><br><span class="line"> </span><br><span class="line">然后切换到B分支上</span><br><span class="line"> </span><br><span class="line">git checkout B</span><br><span class="line"> </span><br><span class="line">git cherry-pick  xxx001</span><br><span class="line"> </span><br><span class="line">然后就将A分支的某个commit合并到了B分支了</span><br></pre></td></tr></table></figure><hr><h3><span id="hui-gun-dao-zhi-qian-mou-ge-fen-zhi">回滚到之前某个分支</span><a href="#hui-gun-dao-zhi-qian-mou-ge-fen-zhi" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">查找对应Log的 id:</span><br><span class="line">git log -3</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">回滚到指定的版本:</span><br><span class="line">git reset --hard e377f60e28c8b84158</span><br><span class="line">git reset --hard 156d981</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">强制提交:</span><br><span class="line">git push -f origin master</span><br></pre></td></tr></table></figure><hr><h3><span id="qiang-xing-fu-gai-de-zui-xin-de-nei-rong">强行覆盖的最新的内容</span><a href="#qiang-xing-fu-gai-de-zui-xin-de-nei-rong" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">将一个分支覆盖相应的分支:</span><br><span class="line"> </span><br><span class="line">1.切换到test分支上 </span><br><span class="line">  git checkout test    </span><br><span class="line"> </span><br><span class="line">2.将master合并到test</span><br><span class="line">  git merge master</span><br><span class="line"> </span><br><span class="line">3.将master分支删掉</span><br><span class="line">  git branch -d master</span><br><span class="line"> </span><br><span class="line">4.将test分支覆盖到master分支上</span><br><span class="line">  git branch -m test master</span><br><span class="line"> </span><br><span class="line">5.将master分支推送远程库上[有分支则覆盖  无分支则创建新的分支并更新上去]</span><br><span class="line">  git push -f origin master</span><br></pre></td></tr></table></figure><hr><h3><span id="bei-fen-xiang-mu-xiang-mu-tong-shi-tui-song-dao-githhub-yu-coding">备份项目 :  项目同时推送到githhub与coding</span><a href="#bei-fen-xiang-mu-xiang-mu-tong-shi-tui-song-dao-githhub-yu-coding" class="header-anchor"></a></h3><ol><li>在 CODING 中新建一个同名项目，不选择 启用 README.md 文件初始化项目，以及任何 License 和 .gitignore 文件</li><li>在本地项目上添加一个:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> git remote set-url --add origin https:&#x2F;&#x2F;git.coding.net&#x2F;samlai&#x2F;xxx.git</span><br><span class="line"></span><br><span class="line"> ps:项目的根目录.git文件夹下confi配置文件变成</span><br><span class="line">[remote &quot;origin&quot;]</span><br><span class="line">url &#x3D; https:&#x2F;&#x2F;github.com&#x2F;ZuoYouLai&#x2F;xxx.git</span><br><span class="line">fetch &#x3D; +refs&#x2F;heads&#x2F;*:refs&#x2F;remotes&#x2F;origin&#x2F;*</span><br><span class="line">url &#x3D; https:&#x2F;&#x2F;git.coding.net&#x2F;samlai&#x2F;xxx.git</span><br><span class="line">[branch &quot;master&quot;]</span><br><span class="line">remote &#x3D; origin</span><br><span class="line">merge &#x3D; refs&#x2F;heads&#x2F;master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">指令辅助：</span><br><span class="line">    (git remote 看看现在项目git 远程主机情况)</span><br><span class="line">    git remote -v</span><br><span class="line">    (git remote add 添加一个远程主机)</span><br><span class="line">    git remote add xx xxx.git</span><br><span class="line">    (git remote rm xx  删掉远程某个远程的配置内容)</span><br></pre></td></tr></table></figure><ol start="3"><li>修改本地项目的任意一个文件:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git add .  </span><br><span class="line">git commit -m &#39;test&#39;</span><br><span class="line">git push origin master &#x2F;&#x2F; 把本地仓库的变化连接到远程仓库主分支</span><br></pre></td></tr></table></figure><ol start="4"><li>参考文章:</li></ol><ul><li><a href="https://feitianbenyue.iteye.com/blog/2376791" target="_blank" rel="noopener">https://feitianbenyue.iteye.com/blog/2376791</a>  </li><li><a href="https://coding.net/help/doc/git/import.html" target="_blank" rel="noopener">https://coding.net/help/doc/git/import.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      Git 使用内容
    
    </summary>
    
    
      <category term="Git" scheme="https://zuoyoulai.github.io/categories/Git/"/>
    
    
      <category term="Git" scheme="https://zuoyoulai.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Go 学习</title>
    <link href="https://zuoyoulai.github.io/2019/12/29/Go-Study/"/>
    <id>https://zuoyoulai.github.io/2019/12/29/Go-Study/</id>
    <published>2019-12-29T07:20:44.000Z</published>
    <updated>2020-01-07T15:11:08.053Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="go-yu-yan-xue-xi">GO 语言学习</span><a href="#go-yu-yan-xue-xi" class="header-anchor"></a></h2><div class="toc"><!-- toc --><ul><li><a href="#xue-xi">学习</a></li><li><a href="#an-zhuang">安装</a></li><li><a href="#zhi-ling-cao-zuo">指令操作</a></li><li><a href="#import-cao-zuo">Import 操作：</a></li><li><a href="#bian-liang-dai-ma">变量代码</a></li><li><a href="#chang-liang">常量</a></li><li><a href="#te-shu-chang-liang-iota-shi-yong">特殊常量 iota 使用</a><ul><li><a href="#bian-cheng">编程</a></li></ul></li><li><a href="#li-zi-1-http-helloworld">例子1 : Http:HelloWorld</a></li><li><a href="#li-zi-2-duo-xian-cheng-xian-cheng-jian-tong-xin">例子2 : 多线程 + 线程间通信</a></li><li><a href="#li-zi-3-shu-zu-de-nei-bu-pai-xu">例子3 : 数组的内部排序</a></li><li><a href="#li-zi-4-dan-yuan-ce-shi-cao-zuo">例子4 : 单元测试操作</a></li><li><a href="#li-zi-5-ji-zhun-ce-shi">例子5 : 基准测试</a></li></ul><!-- tocstop --></div><h3><span id="xue-xi">学习</span><a href="#xue-xi" class="header-anchor"></a></h3><ul><li>指令 : go tool tour</li><li>文档 : <a href="http://docscn.studygolang.com/doc/" target="_blank" rel="noopener">http://docscn.studygolang.com/doc/</a></li></ul><h3><span id="an-zhuang">安装</span><a href="#an-zhuang" class="header-anchor"></a></h3><ul><li><p>Linux</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">下载 &gt; 解压 &gt; 设置</span><br><span class="line"></span><br><span class="line">下载:</span><br><span class="line">    wget https:&#x2F;&#x2F;dl.google.com&#x2F;go&#x2F;go1.13.5.linux-amd64.tar.gz</span><br><span class="line">    </span><br><span class="line">解压:</span><br><span class="line">    tar -C &#x2F;usr&#x2F;local&#x2F; -xzf go1.13.5.linux-amd64.tar.gz</span><br><span class="line">    </span><br><span class="line">    &gt; cd &#x2F;usr&#x2F;local&#x2F;go</span><br><span class="line">    &gt; bin&#x2F;go version</span><br><span class="line">    &gt; go version go1.13.5 linux&#x2F;amd64    </span><br><span class="line">    </span><br><span class="line">设置:</span><br><span class="line">    &gt;&gt; vim &#x2F;etc&#x2F;profile</span><br><span class="line">    &gt;&gt; 添加到最后如下指令</span><br><span class="line">    #go path</span><br><span class="line">    GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</span><br><span class="line">    export PATH&#x3D;$PATH:$GOROOT&#x2F;bin</span><br><span class="line">    &gt;&gt; 退出 wq ，执行: source %</span><br><span class="line">    &gt;&gt; go env  &#x2F;&#x2F;可以正常打印内容  说明安装成功</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">GOROOT</span><br><span class="line">GOPATH</span><br><span class="line">    Mac系统下</span><br><span class="line">GOBIN</span><br><span class="line">PATH</span><br></pre></td></tr></table></figure></li><li><p>Mac 设置 GoPath : <a href="https://www.jianshu.com/p/5c1873eaf3ca" target="_blank" rel="noopener">https://www.jianshu.com/p/5c1873eaf3ca</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> 编辑~&#x2F;.bash_profile文件:</span><br><span class="line"> export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</span><br><span class="line"> </span><br><span class="line"> export GOPATH&#x3D;&#x2F;Users&#x2F;haodalai&#x2F;Desktop&#x2F;Go&#x2F;project</span><br><span class="line"> </span><br><span class="line"> export GOBIN&#x3D;</span><br><span class="line"> </span><br><span class="line"> export PATH&#x3D;$PATH:$&#123;GOPATH&#x2F;&#x2F;:&#x2F;&#x2F;bin:&#125;&#x2F;bin</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">退出执行:</span><br><span class="line">source ~&#x2F;.bash_profile </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Or</span><br><span class="line"></span><br><span class="line">编辑~&#x2F;.zshrc文件</span><br><span class="line"></span><br><span class="line">export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</span><br><span class="line"></span><br><span class="line">export GOPATH&#x3D;&#x2F;Users&#x2F;haodalai&#x2F;Desktop&#x2F;Go&#x2F;project</span><br><span class="line"></span><br><span class="line">export GOBIN&#x3D;</span><br><span class="line"></span><br><span class="line">export PATH&#x3D;$PATH:$&#123;GOPATH&#x2F;&#x2F;:&#x2F;&#x2F;bin:&#125;&#x2F;bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">退出执行:</span><br><span class="line"></span><br><span class="line">source ~&#x2F;.zshrc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最终执行:</span><br><span class="line">&gt;&gt; echo $GOPATH</span><br></pre></td></tr></table></figure></li><li><p>【注意: 以后开发的项目都放在$GOPATH 的 src 目录下】</p></li></ul><h4><span id="mac">Mac</span><a href="#mac" class="header-anchor"></a></h4><h4><span id="windows">Windows</span><a href="#windows" class="header-anchor"></a></h4><h3><span id="zhi-ling-cao-zuo">指令操作</span><a href="#zhi-ling-cao-zuo" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">go run </span><br><span class="line">   -v  列出被编译的代码包名称</span><br><span class="line">   -a  强制执行</span><br><span class="line">   -work 显示临时工作目录并不删除它</span><br><span class="line">   -x 打印命令 并执行过它的</span><br><span class="line">   -n 打印编译的命令但不执行他们</span><br><span class="line">   -p n: 并行编译 其中 n 为并行的数量</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">go build  编译源码文件或代码包  </span><br><span class="line"></span><br><span class="line">go install  编译并安装代码或者源码文件</span><br><span class="line">查看执行文件:</span><br><span class="line">ls $GOBIN  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">go get 从远程代码仓库上下载安装代码包</span><br><span class="line">下载到$GOPATH下 第一个文件的的 src文件夹中</span><br><span class="line">  -d 只执行下载动作不执行安装动作</span><br><span class="line">  -fix 下载后先执行修正动作 再进行编译安装</span><br><span class="line">  -U 利用网络来更新已有的代码包及其依赖包</span><br></pre></td></tr></table></figure><h3><span id="import-cao-zuo">Import 操作：</span><a href="#import-cao-zuo" class="header-anchor"></a></h3><ul><li>如果一个 main 导入其他包，包将被顺序导入</li><li>如果导入的包依赖其他包(包 B)，会首先导入 B 包，然后初始化 B 包中常量和变量，最后如果 B 包中有 init，会自动执行 init()</li><li>如果包导入完成后对 main 中常量和变量进行初始化，执行 main 中的 init函数</li><li>如果一个包被导入多次则该包只会被导入一次</li><li>import 别名 “.” “_”<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">别名：将导入的包命名为另一个容易记忆的别名</span><br><span class="line">点操作: .标识的包导入后，调用该包中函数时可以省略前缀包名</span><br><span class="line">下划线(_)操作: 导入该包，但不导入整个包，而是执行包中的 init 函数此无法通过包名来调用包中的其他函数</span><br><span class="line">             使用下划线操作往往为了注册包中的引擎，让外部可以方便地使用</span><br></pre></td></tr></table></figure></li></ul><h3><span id="bian-liang-dai-ma">变量代码</span><a href="#bian-liang-dai-ma" class="header-anchor"></a></h3><ul><li>全局变量需要加上 var  方法体内则可以不用加上</li><li>大写字母开头可以被包内其他文件导入，小写则不行</li></ul><h3><span id="chang-liang">常量</span><a href="#chang-liang" class="header-anchor"></a></h3><ul><li>类型：显示  隐式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">显式：const identifier [type] &#x3D; value</span><br><span class="line">隐式：const identifier &#x3D; value (通常叫无类型常量)</span><br><span class="line">常量可以使用内置表达式定义 ： 例如 len() unsafe.Sizeof()</span><br><span class="line">常量范围目前只支持布尔，数字，字符串</span><br></pre></td></tr></table></figure></li></ul><h3><span id="te-shu-chang-liang-iota-shi-yong">特殊常量 iota 使用</span><a href="#te-shu-chang-liang-iota-shi-yong" class="header-anchor"></a></h3><ul><li>iota在 const 关键字出现时将被重置为0</li><li>const 中每新增一行常量声明将使 iota 计数一次</li><li>iota 常见用法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 跳值使用法</span><br><span class="line">2. 插队使用法</span><br><span class="line">3. 表达式隐式使用法</span><br><span class="line">4. 单行使用法</span><br></pre></td></tr></table></figure></li></ul><h2><span id="bian-cheng">编程</span><a href="#bian-cheng" class="header-anchor"></a></h2><h3><span id="li-zi-1-http-helloworld">例子1  : Http:HelloWorld</span><a href="#li-zi-1-http-helloworld" class="header-anchor"></a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">http.HandleFunc(<span class="string">"/"</span>, <span class="function"><span class="keyword">func</span><span class="params">(writer http.ResponseWriter, request *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Fprint(writer,<span class="string">"Hello World! Mr.Sam赖"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">http.ListenAndServe(<span class="string">":8989"</span>,<span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">访问： http:<span class="comment">//localhost:8989</span></span><br></pre></td></tr></table></figure><h3><span id="li-zi-2-duo-xian-cheng-xian-cheng-jian-tong-xin">例子2  : 多线程 + 线程间通信</span><a href="#li-zi-2-duo-xian-cheng-xian-cheng-jian-tong-xin" class="header-anchor"></a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ch :=<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">10</span>;i++  &#123;</span><br><span class="line"><span class="keyword">go</span> hello(i, ch)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">msg :=&lt;-ch</span><br><span class="line">fmt.Print(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">(i <span class="keyword">int</span>,ch <span class="keyword">chan</span> <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span>  &#123;</span><br><span class="line">ch &lt;- fmt.Sprintf(<span class="string">"Hello World...%d \n "</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="li-zi-3-shu-zu-de-nei-bu-pai-xu">例子3 : 数组的内部排序</span><a href="#li-zi-3-shu-zu-de-nei-bu-pai-xu" class="header-anchor"></a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//排序</span></span><br><span class="line">arr:=[]<span class="keyword">int</span>&#123;<span class="number">45</span>, <span class="number">23</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">905</span>, <span class="number">16</span>, <span class="number">75</span>&#125;</span><br><span class="line">sort.Ints(arr)</span><br><span class="line"><span class="keyword">for</span> _,val:=<span class="keyword">range</span> arr &#123;</span><br><span class="line">fmt.Println(val)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="li-zi-4-dan-yuan-ce-shi-cao-zuo">例子4 : 单元测试操作</span><a href="#li-zi-4-dan-yuan-ce-shi-cao-zuo" class="header-anchor"></a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"testing"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">1.文件名称必须以: _test 作为后缀</span></span><br><span class="line"><span class="comment">2.忽略测试</span></span><br><span class="line"><span class="comment">  t.SkipNow()</span></span><br><span class="line"><span class="comment">3.执行指令: go test -v</span></span><br><span class="line"><span class="comment">4.注意点:</span></span><br><span class="line"><span class="comment">      方法名称一定需要 : Test_xxxx 名称 Test 为首字母大写</span></span><br><span class="line"><span class="comment">  方法体参数内容 : t *testing.T</span></span><br><span class="line"><span class="comment">5.日志显示: t.Log()  t.Error()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRepeat</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">a :=repeat(<span class="string">"a"</span>)</span><br><span class="line">t.Log(<span class="string">"a 的值"</span>+ a)</span><br><span class="line">k := <span class="string">"aaaaa"</span></span><br><span class="line"><span class="keyword">if</span> a == k &#123;</span><br><span class="line">t.Logf(<span class="string">"测试成功,a 的值为 : %s"</span>,a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPk</span><span class="params">(t *testing.T)</span></span>  &#123;</span><br><span class="line">t.Log( t.Name(),<span class="string">"开始执行 Pt 的内容"</span>)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>;i&lt; <span class="number">9</span> ;i++  &#123;</span><br><span class="line">repeat(<span class="string">"a"</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">repeat</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span>&#123;</span><br><span class="line"><span class="keyword">var</span> result <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">5</span> ;i++  &#123;</span><br><span class="line">result+= <span class="string">"a"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAdd</span><span class="params">(t *testing.T)</span></span>  &#123;</span><br><span class="line"><span class="comment">//忽略测试</span></span><br><span class="line"><span class="comment">//t.SkipNow()</span></span><br><span class="line">t.Log(t.Name(), <span class="string">"Begin...."</span>)</span><br><span class="line">a := <span class="number">2</span></span><br><span class="line">b := <span class="number">3</span></span><br><span class="line"><span class="keyword">if</span> add(a,b) != <span class="number">5</span>&#123;</span><br><span class="line">t.Errorf(<span class="string">"result   %d "</span>,add(a, b))</span><br><span class="line">&#125;</span><br><span class="line">t.Logf(<span class="string">"a + b is  :  %d"</span>,add(a,b))</span><br><span class="line">t.Log(t.Name(), <span class="string">"end...."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a,b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> go test -v</span></span><br><span class="line"><span class="comment"> 打印结果：</span></span><br><span class="line"><span class="comment">=== RUN   TestRepeat</span></span><br><span class="line"><span class="comment">--- PASS: TestRepeat (0.00s)</span></span><br><span class="line"><span class="comment">    lx_test.go:18: a 的值aaaaa</span></span><br><span class="line"><span class="comment">    lx_test.go:21: 测试成功,a 的值为 : aaaaa</span></span><br><span class="line"><span class="comment">=== RUN   TestPk</span></span><br><span class="line"><span class="comment">--- PASS: TestPk (0.00s)</span></span><br><span class="line"><span class="comment">    lx_test.go:27: TestPk 开始执行 Pt 的内容</span></span><br><span class="line"><span class="comment">=== RUN   TestAdd</span></span><br><span class="line"><span class="comment">--- PASS: TestAdd (0.00s)</span></span><br><span class="line"><span class="comment">    lx_test.go:45: TestAdd Begin....</span></span><br><span class="line"><span class="comment">    lx_test.go:51: a + b is  :  5</span></span><br><span class="line"><span class="comment">    lx_test.go:52: TestAdd end....</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3><span id="li-zi-5-ji-zhun-ce-shi">例子5 : 基准测试</span><a href="#li-zi-5-ji-zhun-ce-shi" class="header-anchor"></a></h3><ul><li>参考链接 ： <a href="http://c.biancheng.net/view/124.html" target="_blank" rel="noopener">http://c.biancheng.net/view/124.html</a><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">参考链接 : http://c.biancheng.net/view/124.html</span></span><br><span class="line"><span class="comment">基准测试:</span></span><br><span class="line"><span class="comment">1.一定需要方法名称 : Benchmark开头</span></span><br><span class="line"><span class="comment">2.执行的指令:</span></span><br><span class="line"><span class="comment">          go test -v -bench=.</span></span><br><span class="line"><span class="comment">          go test -v -bench=. jz_test.go</span></span><br><span class="line"><span class="comment">          增加自定义时间:</span></span><br><span class="line"><span class="comment">          go test -v -bench=. -benchtime=5s jz_test.go</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkAdd</span><span class="params">(b *testing.B)</span></span>  &#123;</span><br><span class="line"><span class="keyword">var</span> n <span class="keyword">int</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;b.N;i++ &#123;</span><br><span class="line">n++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">执行:</span></span><br><span class="line"><span class="comment">go test -v -bench=.</span></span><br><span class="line"><span class="comment">打印的内容:</span></span><br><span class="line"><span class="comment">goos: darwin</span></span><br><span class="line"><span class="comment">goarch: amd64</span></span><br><span class="line"><span class="comment">BenchmarkAdd-16         1000000000               0.238 ns/op</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">测试说明：</span></span><br><span class="line"><span class="comment">执行了: 1000000000 次</span></span><br><span class="line"><span class="comment">每次的操作时间: 0.238 ns</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      学习新的语言，Go 语言
    
    </summary>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/categories/Go/"/>
    
    
      <category term="Go" scheme="https://zuoyoulai.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>Linux-Vim 插件,指令的学习</title>
    <link href="https://zuoyoulai.github.io/2019/12/27/Linux-Vim/"/>
    <id>https://zuoyoulai.github.io/2019/12/27/Linux-Vim/</id>
    <published>2019-12-26T16:20:02.000Z</published>
    <updated>2020-01-01T04:44:58.450Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#vim-bian-ji-qi-xue-xi">Vim 编辑器学习</a><ul><li><a href="#zsh-an-zhuang">zsh 安装</a></li><li><a href="#xi-tong-jian-wu-mi-deng-lu">系统间无密登录</a></li><li><a href="#vim-kuai-jie-jian">VIM 快捷键</a></li><li><a href="#cha-zhao-vim-cha-jian-fang-shi">查找 VIm 插件方式</a></li><li><a href="#vim-an-zhuang-cha-jian">VIm 安装插件</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="vim-bian-ji-qi-xue-xi">Vim 编辑器学习</span><a href="#vim-bian-ji-qi-xue-xi" class="header-anchor"></a></h2><ul><li><p>学习地址 ： <a href="https://www.cnblogs.com/vijozsoft/p/5608108.html" target="_blank" rel="noopener">https://www.cnblogs.com/vijozsoft/p/5608108.html</a></p></li><li><p>vimrc : <a href="https://www.cnblogs.com/yuandonghua/p/10483882.html" target="_blank" rel="noopener">https://www.cnblogs.com/yuandonghua/p/10483882.html</a></p></li></ul><hr><h3><span id="zsh-an-zhuang">zsh 安装</span><a href="#zsh-an-zhuang" class="header-anchor"></a></h3><ul><li><p>安装指令:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;</span><br></pre></td></tr></table></figure></li><li><p>修改主题:  <a href="https://github.com/ohmyzsh/ohmyzsh/wiki/themes" target="_blank" rel="noopener">https://github.com/ohmyzsh/ohmyzsh/wiki/themes</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; vim ~&#x2F;.zshrc</span><br><span class="line">主题我喜欢修改成: af-magic</span><br><span class="line">ZSH_THEME&#x3D;&quot;af-magic&quot;</span><br><span class="line">生效:</span><br><span class="line">&gt;&gt; exec $SHELL</span><br></pre></td></tr></table></figure></li><li><p>bash和zsh切换</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">切换到bash</span><br><span class="line"></span><br><span class="line">chsh -s &#x2F;bin&#x2F;bash</span><br><span class="line">切换到zsh</span><br><span class="line"></span><br><span class="line">chsh -s &#x2F;bin&#x2F;zsh</span><br></pre></td></tr></table></figure></li><li><p>卸载oh my zsh  : Mac 参考链接 : <a href="https://my.oschina.net/u/2391658/blog/1584566" target="_blank" rel="noopener">https://my.oschina.net/u/2391658/blog/1584566</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在命令行输入如下命令，回车即可：uninstall_oh_my_zsh</span><br></pre></td></tr></table></figure></li></ul><hr><h3><span id="xi-tong-jian-wu-mi-deng-lu">系统间无密登录</span><a href="#xi-tong-jian-wu-mi-deng-lu" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">A机器无密登录 B 机器的操作: ssh root@ipAddress</span><br><span class="line"></span><br><span class="line">2台机器 A 本地   B 远程:</span><br><span class="line"></span><br><span class="line">In A机器：</span><br><span class="line">1.yum install ssh</span><br><span class="line">2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub    &#x2F;&#x2F; id_rsa是私钥</span><br><span class="line"></span><br><span class="line">将这个公钥给机器 B 中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In B机器:</span><br><span class="line">进入&#x2F;root&#x2F;.ssh&#x2F;目录中 将 A 机器的公钥给复制到 B 器文件 : sam.pub</span><br><span class="line">然后执行指令:</span><br><span class="line"></span><br><span class="line">&gt;&gt; cat sam.pub &gt;&gt; &#x2F;root&#x2F;.ssh&#x2F;authorized_keys (将id_rsa.pub的内容追加到authorized_keys 中)</span><br></pre></td></tr></table></figure><h3><span id="vim-kuai-jie-jian">VIM 快捷键</span><a href="#vim-kuai-jie-jian" class="header-anchor"></a></h3><h5><span id="ji-ben-shi-yong">基本使用</span><a href="#ji-ben-shi-yong" class="header-anchor"></a></h5><ul><li><blockquote><p>[ shift + : ]  : 进入 normal 模式</p></blockquote></li><li><blockquote><p>[ i ]  : 插入编写操作  –&gt; insert操作</p></blockquote></li><li><blockquote><p>[ a ]  :  append在光标处添加模式</p></blockquote></li><li><blockquote><p>[ wq ] : 书写+退出操作 <br> [ q ] :退出 <br> [ !q ] :强制退出操作 </p></blockquote></li><li><blockquote><p>[ esc 或者 control + [ ] : 插入模式转为 normal模式</p></blockquote></li></ul><h5><span id="guang-biao-yi-dong">光标移动</span><a href="#guang-biao-yi-dong" class="header-anchor"></a></h5><ul><li><p>Ctrl + u  【往前翻页】   Ctrl + f  【往前翻页 : forward】</p></li><li><p>gg : 第一行   GG : 最后一行</p></li><li><p>0 : 行首  $ : 行尾</p></li><li><p>V : 选中行内容 使用 k j 来选中内容</p></li><li><p>h : 向左</p></li><li><p>j ：向下</p></li><li><p>k :  向上</p></li><li><p>l : 向右</p></li><li><p>0 : 回到行首</p></li><li><p>$ : 回到行尾</p></li><li><p>gg : 回到行首</p></li><li><p>G : 回到行尾</p></li><li><blockquote><p>u : 返回上一步</p></blockquote></li><li><blockquote><p>control + r : 重复上一步的操作</p></blockquote></li></ul><h5><span id="cha-ru-zi-fu">插入字符</span><a href="#cha-ru-zi-fu" class="header-anchor"></a></h5><ul><li>i</li><li>a</li><li>I : 回到行头进行插入</li><li>A: 进入光标所对应的行尾插入</li><li>p : 粘贴</li><li>yy ：复制一行</li></ul><h5><span id="shan-chu-zi-fu">删除字符</span><a href="#shan-chu-zi-fu" class="header-anchor"></a></h5><ul><li>x  :  向后删除单个字符</li><li>X  : 向前删除单个字符</li><li>nx，nX : 删除多个字符的操作</li></ul><h5><span id="da-kai-wen-jian">打开文件</span><a href="#da-kai-wen-jian" class="header-anchor"></a></h5><ul><li>vim 1.txt  2.txt  -O</li></ul><hr><h3><span id="cha-zhao-vim-cha-jian-fang-shi">查找 VIm 插件方式</span><a href="#cha-zhao-vim-cha-jian-fang-shi" class="header-anchor"></a></h3><ul><li>google 的方式</li><li>浏览: vimawesome.com : <a href="https://vimawesome.com/" target="_blank" rel="noopener">https://vimawesome.com/</a></li></ul><hr><h3><span id="vim-an-zhuang-cha-jian">VIm 安装插件</span><a href="#vim-an-zhuang-cha-jian" class="header-anchor"></a></h3><h4><span id="cha-jian-gong-ju-vim-plugin">插件工具 : vim-plugin</span><a href="#cha-jian-gong-ju-vim-plugin" class="header-anchor"></a></h4><ul><li>插件工具内容：vim-plugin  : <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">https://github.com/junegunn/vim-plug</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mac 系统执行:</span><br><span class="line"></span><br><span class="line">curl -fLo ~&#x2F;.vim&#x2F;autoload&#x2F;plug.vim --create-dirs \</span><br><span class="line">    https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;junegunn&#x2F;vim-plug&#x2F;master&#x2F;plug.vim</span><br><span class="line"></span><br><span class="line">编写添加内容到 vimrc:</span><br><span class="line"></span><br><span class="line">call plug#begin(&#39;~&#x2F;.vim&#x2F;plugged&#39;)</span><br><span class="line"></span><br><span class="line">call plug#end()</span><br></pre></td></tr></table></figure></li></ul><h4><span id="liu-lan-zui-jin-cha-jian-vim-startify">浏览最近插件:  vim-startify</span><a href="#liu-lan-zui-jin-cha-jian-vim-startify" class="header-anchor"></a></h4><ul><li>安装浏览最近的文件的插件:  vim-startify :  <a href="https://github.com/mhinz/vim-startify" target="_blank" rel="noopener">https://github.com/mhinz/vim-startify</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;mhinz&#x2F;vim-startify&#39;</span><br><span class="line"></span><br><span class="line">编写添加内容到 vimrc:</span><br><span class="line">&gt;&gt; vim ~&#x2F;.vimrc</span><br><span class="line">call plug#begin(&#39;~&#x2F;.vim&#x2F;plugged&#39;)</span><br><span class="line">Plug &#39;mhinz&#x2F;vim-startify&#39;</span><br><span class="line">call plug#end()</span><br><span class="line"></span><br><span class="line">然后让 vimrc 进行生效：</span><br><span class="line">进入 vim ~&#x2F;.vimrc 的 normal 模式 执行2个指令：</span><br><span class="line">:source ~&#x2F;.vimrc</span><br><span class="line">:PluginInstall</span><br><span class="line"></span><br><span class="line">插件就可以成功安装：</span><br><span class="line">然后执行 vim 就可以查看就近打开的文件内容</span><br></pre></td></tr></table></figure></li></ul><h4><span id="dai-ma-bu-quan-de-cha-jian-vim-surround">代码补全的插件：vim-surround</span><a href="#dai-ma-bu-quan-de-cha-jian-vim-surround" class="header-anchor"></a></h4><ul><li>代码补全的插件：surround : <a href="https://github.com/tpope/vim-surround" target="_blank" rel="noopener">https://github.com/tpope/vim-surround</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;tpope&#x2F;vim-surround&#39;</span><br><span class="line"></span><br><span class="line">使用方式:</span><br><span class="line">ds (delete a surrounding)</span><br><span class="line">cs (change a surrounding)</span><br><span class="line">ys (you add a surrounding)</span><br><span class="line"></span><br><span class="line">光标在单词的左处:</span><br><span class="line">ds iw &#39;  --&gt; 将字符添加一个单引号</span><br><span class="line">cs &#39; &quot;   --&gt; 将字符的单引号变成双引号</span><br><span class="line">ds &quot;     --&gt; 删除&quot;引号</span><br></pre></td></tr></table></figure></li></ul><h4><span id="zhuang-tai-lan-mei-hua-vim-airline">状态栏美化: vim-airline</span><a href="#zhuang-tai-lan-mei-hua-vim-airline" class="header-anchor"></a></h4><ul><li>状态栏美化: vim-airline : <a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">https://github.com/vim-airline/vim-airline</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;vim-airline&#x2F;vim-airline&#39;</span><br><span class="line">Plug &#39;vim-airline&#x2F;vim-airline-themes&#39;</span><br></pre></td></tr></table></figure><h4><span id="dai-ma-suo-jin-xian-tiao-indentline">代码缩进线条:indentline</span><a href="#dai-ma-suo-jin-xian-tiao-indentline" class="header-anchor"></a></h4><ul><li>代码缩进线条:indentline</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;yggdroot&#x2F;indentline&#39;</span><br></pre></td></tr></table></figure><h4><span id="pei-se-vim-hybrid">配色: vim-hybrid</span><a href="#pei-se-vim-hybrid" class="header-anchor"></a></h4><ul><li>配色: vim-hybrid: <a href="https://github.com/w0ng/vim-hybrid" target="_blank" rel="noopener">https://github.com/w0ng/vim-hybrid</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;w0ng&#x2F;vim-hybrid&#39;</span><br><span class="line">其他配置加上vimrc:</span><br><span class="line">set background&#x3D;dark</span><br><span class="line">colorscheme hybrid  </span><br><span class="line"></span><br><span class="line">【本地安装了：Oh My Zsh 】 需要修改相应的主题：https:&#x2F;&#x2F;github.com&#x2F;ohmyzsh&#x2F;ohmyzsh&#x2F;wiki&#x2F;themes</span><br><span class="line">vim ~&#x2F;.zshrc</span><br><span class="line">ZSH_THEME&#x3D;&quot;af-magic&quot;</span><br></pre></td></tr></table></figure></li></ul><h4><span id="shu-xing-wen-jian-mu-lu-nerdtree">树形文件目录 : nerdtree</span><a href="#shu-xing-wen-jian-mu-lu-nerdtree" class="header-anchor"></a></h4><ul><li>树形文件夹管理:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  Plug &#39;scrooloose&#x2F;nerdtree&#39;</span><br><span class="line">  </span><br><span class="line">  添加 Ctrl+n 方式:(vimrc)</span><br><span class="line">  map &lt;C-n&gt; :NERDTreeToggle&lt;CR&gt;</span><br><span class="line">  </span><br><span class="line">  配合使用 Normal 方式操作：</span><br><span class="line">  Ctrl+n 打开树结构  </span><br><span class="line">  :vs 打开新的窗体</span><br><span class="line">  ctrl+w+w 光标在左右窗口切换</span><br><span class="line">  </span><br><span class="line">  快捷键： </span><br><span class="line">  参考链接内容: https:&#x2F;&#x2F;blog.csdn.net&#x2F;Lius_1006&#x2F;article&#x2F;details&#x2F;79524512</span><br><span class="line">  </span><br><span class="line">  h j k l移动光标定位</span><br><span class="line">  ctrl+w+w 光标在左右窗口切换</span><br><span class="line">  ctrl+w+r 切换当前窗口左右布局</span><br><span class="line">  ctrl+p 模糊搜索文件</span><br><span class="line">  gT 切换到前一个tab</span><br><span class="line">  g t 切换到后一个tab</span><br><span class="line">  o 打开关闭文件或者目录，如果是文件的话，光标出现在打开的文件中</span><br><span class="line">  O 打开结点下的所有目录</span><br><span class="line">  X 合拢当前结点的所有目录</span><br><span class="line">  x 合拢当前结点的父目录</span><br><span class="line">  i和s水平分割或纵向分割窗口打开文件</span><br><span class="line">  u 打开上层目录</span><br><span class="line">t 在标签页中打开</span><br><span class="line">  T 在后台标签页中打开</span><br><span class="line">  p 到上层目录</span><br><span class="line">  P 到根目录</span><br><span class="line">  K 到同目录第一个节点</span><br><span class="line">  J 到同目录最后一个节点</span><br><span class="line">  m 显示文件系统菜单（添加、删除、移动操作）</span><br><span class="line">  ? 帮助</span><br><span class="line">  :q 关闭</span><br></pre></td></tr></table></figure></li></ul><h4><span id="kuai-su-ding-wei-wen-jian-ctrlp">快速定位文件:ctrlp</span><a href="#kuai-su-ding-wei-wen-jian-ctrlp" class="header-anchor"></a></h4><ul><li>快速定位文件:ctrlp : <a href="https://github.com/kien/ctrlp.vim" target="_blank" rel="noopener">https://github.com/kien/ctrlp.vim</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;kien&#x2F;ctrlp.vim&#39;</span><br><span class="line"></span><br><span class="line">添加快捷键：</span><br><span class="line">let g:ctrlp_map &#x3D; &#39;&lt;c-p&gt;&#39;</span><br></pre></td></tr></table></figure><h4><span id="kuai-su-cha-zhao-wen-jian-zi-fu-easymotion">快速查找文件字符 ：easymotion</span><a href="#kuai-su-cha-zhao-wen-jian-zi-fu-easymotion" class="header-anchor"></a></h4><ul><li>快速查找文件字符 ：easymotion   <a href="https://github.com/easymotion/vim-easymotion" target="_blank" rel="noopener">https://github.com/easymotion/vim-easymotion</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;easymotion&#x2F;vim-easymotion&#39;</span><br><span class="line">添加快捷键：</span><br><span class="line">nmap ss &lt;Plug&gt;(easymotion-s2)</span><br><span class="line"></span><br><span class="line">可能安装的插件的时间比较长 需要等下</span><br><span class="line">使用的方式:</span><br><span class="line">按下 ss 键  写入单个字符 就可以全文查找  根据某个特定的字符来跳到相应的位置上</span><br></pre></td></tr></table></figure><h4><span id="mo-hu-sou-suo-fzf">模糊搜索：fzf</span><a href="#mo-hu-sou-suo-fzf" class="header-anchor"></a></h4><ul><li>模糊搜索 : <a href="https://github.com/junegunn/fzf.vim" target="_blank" rel="noopener">https://github.com/junegunn/fzf.vim</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;junegunn&#x2F;fzf&#39;, &#123; &#39;dir&#39;: &#39;~&#x2F;.fzf&#39;, &#39;do&#39;: &#39;.&#x2F;install --all&#39; &#125;</span><br><span class="line">Plug &#39;junegunn&#x2F;fzf.vim&#39;</span><br><span class="line"></span><br><span class="line">常用指令:</span><br><span class="line">:Files [PATH]  查找文件名称的搜索</span><br><span class="line">:Ag [PATTERN]  查找文件字符的搜索</span><br></pre></td></tr></table></figure><h4><span id="quan-ju-ti-huan-far">全局替换: far</span><a href="#quan-ju-ti-huan-far" class="header-anchor"></a></h4><ul><li>全局替换: <a href="https://github.com/brooth/far.vim" target="_blank" rel="noopener">https://github.com/brooth/far.vim</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;brooth&#x2F;far.vim&#39;</span><br><span class="line"></span><br><span class="line">:Far foo bar **&#x2F;*.py</span><br><span class="line">:Fardo</span><br></pre></td></tr></table></figure><h4><span id="go-yu-yan-dai-ma-de-shu-xie-vim-go">go 语言代码的书写: vim-go</span><a href="#go-yu-yan-dai-ma-de-shu-xie-vim-go" class="header-anchor"></a></h4><ul><li>github : <a href="https://github.com/fatih/vim-go" target="_blank" rel="noopener">https://github.com/fatih/vim-go</a></li><li>说明文档 : <a href="https://github.com/fatih/vim-go-tutorial" target="_blank" rel="noopener">https://github.com/fatih/vim-go-tutorial</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;fatih&#x2F;vim-go&#39;, &#123; &#39;do&#39;: &#39;:GoUpdateBinaries&#39; &#125;</span><br><span class="line"></span><br><span class="line">指令使用:</span><br></pre></td></tr></table></figure><h4><span id="zhu-shi-nei-rong-cha-jian-vim-commentary">注释内容插件：vim-commentary</span><a href="#zhu-shi-nei-rong-cha-jian-vim-commentary" class="header-anchor"></a></h4><ul><li>注释内容:  <a href="https://github.com/tpope/vim-commentary" target="_blank" rel="noopener">https://github.com/tpope/vim-commentary</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Plug &#39;tpope&#x2F;vim-commentary&#39;</span><br><span class="line"></span><br><span class="line">使用 gc 进行注释</span><br><span class="line"></span><br><span class="line">选择多行进行注释操作:</span><br><span class="line">:V j k (向上向下选取内容) + gc  就可以进行多行注释(任何语言都是可以进行注释的)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      vim,Linux学习笔记,记录常用的插件,与使用指令内容
    
    </summary>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zuoyoulai.github.io/tags/Linux/"/>
    
      <category term="Vim" scheme="https://zuoyoulai.github.io/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>docker笔记内容</title>
    <link href="https://zuoyoulai.github.io/2019/12/25/docker%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9/"/>
    <id>https://zuoyoulai.github.io/2019/12/25/docker%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9/</id>
    <published>2019-12-25T07:25:03.000Z</published>
    <updated>2019-12-29T16:40:03.219Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#docker-xue-xi-bi-ji-nei-rong">Docker 学习笔记内容</a><ul><li><a href="#docker-swarm">docker-swarm:</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="docker-xue-xi-bi-ji-nei-rong">Docker 学习笔记内容</span><a href="#docker-xue-xi-bi-ji-nei-rong" class="header-anchor"></a></h2><ul><li><p>jdk 与 docker各种版本之间限制:【很好的博文 <a href="https://kelvinji2009.github.io/tags/docker/" target="_blank" rel="noopener">来自</a>】</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">简言之：注意资源限制的不匹配。测试你的内存设置和JVM标志，不要假设任何东西。</span><br><span class="line">如果您在Docker容器中运行Java，请确保你设置了docker内存限制和在JVM中也做了限制，或者你的JVM能够理解这些限制。</span><br><span class="line">如果您无法升级您的Java版本，请使用-Xmx设置您自己的限制。</span><br><span class="line">对于Java 8和Java 9，请更新到最新版本并使用： -XX：+UnlockExperimentalVMOptions -XX：+UseCGroupMemoryLimitForHeap</span><br><span class="line">docker run -m 100m -it adoptopenjdk&#x2F;openjdk10:nightly &#x2F;bin&#x2F;bash</span><br><span class="line">对于Java 10，确保它支持’UseContainerSupport’（更新到最新版本）。</span><br><span class="line">docker run -m 100m -it adoptopenjdk&#x2F;openjdk9-openj9 &#x2F;bin&#x2F;bash</span><br><span class="line">对于OpenJ9（我强烈建议使用，可以在生产环境中有效减少内存占用量），现在使用-Xmx设置限制，但很快会出现一个支持UseContainerSupport标志的版本。</span><br></pre></td></tr></table></figure></li><li><p>1.配置的docker容器,外网不可以访问，只能内网才可以进行访问</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run xxx -p 3306:3306  -d  xximage  : 这个port会对外网可以进行访问,无视防火墙的设置</span><br><span class="line">docker run xxx -p 127.0.0.1:3306:3306  -d  xximage  : 这个port是针对本地的地址的内容，外网无法进行访问</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>2.清空的none的docker镜像内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images -f &quot;dangling&#x3D;true&quot; -q)</span><br></pre></td></tr></table></figure></li><li><p>3.docker可视化工具:portainer <a href="https://blog.csdn.net/bbwangj/article/details/80973219" target="_blank" rel="noopener">参考资料</a> | <a href="https://portainer.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener">官方文档</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">    1.拉取镜像：docker pull portainer&#x2F;portainer</span><br><span class="line">  </span><br><span class="line">    2.docker run相应的脚本内容：</span><br><span class="line">      local本地模式开启:</span><br><span class="line">      添加 ： -v &quot;&#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock&quot;</span><br><span class="line">      docker run -d -p 9000:9000 \</span><br><span class="line">              --restart&#x3D;always \</span><br><span class="line">              -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \</span><br><span class="line">              --name prtainer-test \</span><br><span class="line">              docker.io&#x2F;portainer&#x2F;portainer</span><br><span class="line">    </span><br><span class="line">    3.访问相应的ip地址：http:&#x2F;&#x2F;IP:9000    </span><br><span class="line">   &#96;&#96;&#96;    </span><br><span class="line">- 4.docker无法查看jvm的参数 [参考资料](https:&#x2F;&#x2F;blog.csdn.net&#x2F;kinginblue&#x2F;article&#x2F;details&#x2F;78078028)</span><br><span class="line">&#96;&#96;&#96;text</span><br><span class="line">       1.使用 --cap-add 明确添加指定功能：</span><br><span class="line">         docker run --cap-add&#x3D;SYS_PTRACE ...</span><br><span class="line">       2.docker compose添加的相应指令:</span><br><span class="line">          version: &#39;2&#39;</span><br><span class="line">          services:</span><br><span class="line">            mysql:</span><br><span class="line">              ...</span><br><span class="line">            api:</span><br><span class="line">              ...</span><br><span class="line">              cap_add:</span><br><span class="line">                - SYS_PTRACE    </span><br><span class="line">&#96;&#96;&#96;  </span><br><span class="line">- 5.docker对jdk资源的限制: [参考资料](https:&#x2F;&#x2F;segmentfault.com&#x2F;a&#x2F;1190000014142950)</span><br><span class="line">- 6.docker compose指令 : [参考资料](https:&#x2F;&#x2F;www.cnblogs.com&#x2F;52fhy&#x2F;p&#x2F;5991344.html)   </span><br><span class="line"></span><br><span class="line">- 7.docker容器启动非常的缓慢 死机  [参考](https:&#x2F;&#x2F;my.oschina.net&#x2F;u&#x2F;1188877&#x2F;blog&#x2F;422405?p&#x3D;1)</span><br><span class="line">&#96;&#96;&#96;text</span><br><span class="line">    1.sudo service docker stop</span><br><span class="line">    2.rm -rf &#x2F;var&#x2F;lib&#x2F;docker&#x2F;*   #(记得备份重要数据)</span><br><span class="line">    3.sudo servie docker start</span><br></pre></td></tr></table></figure></li><li><p>8.linux报错:kernel:unregister_netdevice: waiting for lo to become free. Usage count = 1</p></li></ul><h4><span id="docker-compose">docker-compose</span><a href="#docker-compose" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up 执行docker镜像的内容</span><br><span class="line">docker-compose build 会执行文件里面需要build的镜像内容,然后再进行up的处理</span><br></pre></td></tr></table></figure><h3><span id="docker-swarm">docker-swarm:</span><a href="#docker-swarm" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">1.生产环境的使用，多机器，扩展部署</span><br><span class="line">2.Node有2种角色：Manager Worker</span><br><span class="line">3.Manager要多节点部署避免单点故障  需要共享库来同步状态</span><br><span class="line">4.Service 和 Replicas</span><br><span class="line">5.Manager进行做决策多部署服务到多个节点上</span><br><span class="line">    </span><br><span class="line">6.docker swarm 指令:</span><br><span class="line">  A.docker swarm  --advertise-addr&#x3D;[IP]  初始化manager</span><br><span class="line">    查看join的信息然后把内容加入到子节点上</span><br><span class="line">  B.docker node ls  查看manager节点信息 看到manger+worker的节点信息</span><br><span class="line"></span><br><span class="line">7.swarm环境搭建好之后，进行对service进行操作</span><br><span class="line">  A.创建服务: docker service create -name [Images] bash</span><br><span class="line">  B.docker service ls</span><br><span class="line">  C.docker service ps demo</span><br><span class="line">  D.docker service scale&#x3D;[Num] 水平扩展到不一样的机器</span><br><span class="line"></span><br><span class="line">8.docker swarm部署 wordpress</span><br><span class="line">  A.创建网络：共享的网络</span><br><span class="line">    docker network create -d overlay demo</span><br><span class="line">  B.docker service create xxxName</span><br><span class="line">  C.多节点的同步问题：overlay  :  原理是DNS服务来发现的功能，为连overlay建一条日志   </span><br><span class="line"></span><br><span class="line">  docker swarm技术:</span><br><span class="line">      Routing Mesh的两种体现：【题外话：Lvs+keepalived实现高可用集群】</span><br><span class="line">        A. Internal : container 和 container之间的访问通过overlay网络(通过Vip虚拟Ip)</span><br><span class="line">           【具体原理可以查看 [图片](&#x2F;images&#x2F;Internal原理.png)】</span><br><span class="line">        B. Ingress ： 如果服务有绑定接口，则此服务可以通过任意swarm节点的相应接口访问</span><br><span class="line">            作用:</span><br><span class="line">                外部访问的负载均衡</span><br><span class="line">                服务端口被暴露到各个swarm节点</span><br><span class="line">                内部通过IpVs进行负载均衡</span><br><span class="line">                [Ingress流程图 ： &#x2F;images&#x2F;Ingress.png]</span><br><span class="line">                [数据包传输流程图 ： &#x2F;images&#x2F;Ingress数据包走向.png]</span><br><span class="line">              </span><br><span class="line">            </span><br><span class="line"> </span><br><span class="line"> 9.docker发布服务在生产环境:</span><br><span class="line">    借助compose 的 version &#x3D; 3部署到生产环境上</span><br><span class="line">    docker stack deploy  执行的compose文件的内容</span><br><span class="line">    docker stack remove  进行删掉的services服务</span><br><span class="line">  </span><br><span class="line"> 10.DOckerSecret管理</span><br><span class="line">    Secret Management:</span><br><span class="line">        1.存在Swarm Manager节点Raft database里</span><br><span class="line">        2.Secret可以assign给一个service,这个service就能看到这个secret</span><br><span class="line">        3.在container内部secret看起来像文件，但是实际上在内存中</span><br><span class="line">    指令:</span><br><span class="line">        创建: docker secret create my-pwd</span><br><span class="line">        删除: docker secret rm my-pwd</span><br><span class="line">        在创建一个secret在一个容器中，容器里面的文件夹中有相应的内容：</span><br><span class="line">         1. docker service create --name xxx --secret my-pwd  【imagesName】</span><br><span class="line">         2. docker service ls  查看服务节点多少个</span><br><span class="line">         3. docker service ps [name]   查看服务节点在哪里</span><br><span class="line">         4. cat &#x2F;run&#x2F;secrests&#x2F;my-pwd   就可以查看secret的明文内容</span><br><span class="line">         </span><br><span class="line">  11.Swarm更新服务(生产环境):</span><br><span class="line">      A.运行一个service</span><br><span class="line">        docker service create --name web --publish 8080:5000 --network demo flask:1.0</span><br><span class="line">      B.运行2个节点的操作</span><br><span class="line">        docker service scale web&#x3D;2</span><br><span class="line">      3.运行shell指令来测试</span><br><span class="line">        sh -c &quot;while true; do curl 127.0.0.1:8080&amp;&amp;sleep 1;done&quot;     </span><br><span class="line">      4.更新指令很多内容:</span><br><span class="line">        docker service update --help</span><br><span class="line">      5.更新images的版本 </span><br><span class="line">        docker service update --image flask:2.0 web</span><br><span class="line">      6.更新端口的操作:删掉原来的端口并添加新的端口操作</span><br><span class="line">        docker service ps web</span><br><span class="line">        docker service update --publish-rm 8080:5000 --publish-add 8099:5000 web</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">   12. dockerEE 企业版:可以查看swarm部署多个节点监控状态</span><br><span class="line">       在dockerEE基础上部署DTR,其作用是扫描镜像的安全性问题</span><br><span class="line">       阿里云也有相应的docker-swarm服务，但是相应的付费还是蛮昂贵的</span><br></pre></td></tr></table></figure><ul><li><a href="http://www.dockone.io/article/929" target="_blank" rel="noopener">替代Docker Compose实现容器双向联通的三种方法</a></li></ul>]]></content>
    
    <summary type="html">
    
      docker 调试的笔记内容
    
    </summary>
    
    
      <category term="Docker" scheme="https://zuoyoulai.github.io/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://zuoyoulai.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>windows-Mq 启动操作</title>
    <link href="https://zuoyoulai.github.io/2019/12/25/windows-Mq/"/>
    <id>https://zuoyoulai.github.io/2019/12/25/windows-Mq/</id>
    <published>2019-12-25T06:08:48.000Z</published>
    <updated>2019-12-29T16:40:03.227Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#windows-rocketmq-console-guan-li-kong-zhi-tai-de-qi-dong">Windows RocketMq Console管理控制台的启动</a></li><li><a href="#qi-dong-de-jiao-ben">启动的脚本</a><ul><li><a href="#fang-wen">访问</a></li></ul></li></ul><!-- tocstop --></div><h3><span id="windows-rocketmq-console-guan-li-kong-zhi-tai-de-qi-dong">Windows RocketMq Console管理控制台的启动</span><a href="#windows-rocketmq-console-guan-li-kong-zhi-tai-de-qi-dong" class="header-anchor"></a></h3><h4><span id="xia-zai-amp-da-bao">下载 &amp; 打包</span><a href="#xia-zai-amp-da-bao" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;rocketmq-externals.git</span><br><span class="line">cd rocketmq-externals&#x2F;rocketmq-console&#x2F;</span><br><span class="line">mvn clean package -Dmaven.test.skip&#x3D;true</span><br></pre></td></tr></table></figure><h3><span id="qi-dong-de-jiao-ben">启动的脚本</span><a href="#qi-dong-de-jiao-ben" class="header-anchor"></a></h3><ul><li><p>3.5版本以下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar target\rocketmq-console-ng-1.0.1.jar --rocketmq.config.namesrvAddr&#x3D;127.0.0.1:9876 &gt; log.txt --rocketmq.config.isVIPChannel&#x3D;false</span><br></pre></td></tr></table></figure></li><li><p>3.5版本以下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar target\rocketmq-console-ng-1.0.1.jar --rocketmq.config.namesrvAddr&#x3D;127.0.0.1:9876 &gt; log.txt</span><br></pre></td></tr></table></figure></li></ul><p>还有其他的配置可以自定义配置的：【以下配置来自console项目的 application.properties】</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">server.contextPath&#x3D;</span><br><span class="line">server.port&#x3D;8080</span><br><span class="line"></span><br><span class="line">### SSL setting</span><br><span class="line">#server.ssl.key-store&#x3D;classpath:rmqcngkeystore.jks</span><br><span class="line">#server.ssl.key-store-password&#x3D;rocketmq</span><br><span class="line">#server.ssl.keyStoreType&#x3D;PKCS12</span><br><span class="line">#server.ssl.keyAlias&#x3D;rmqcngkey</span><br><span class="line"></span><br><span class="line">#spring.application.index&#x3D;true</span><br><span class="line">spring.application.name&#x3D;rocketmq-console</span><br><span class="line">spring.http.encoding.charset&#x3D;UTF-8</span><br><span class="line">spring.http.encoding.enabled&#x3D;true</span><br><span class="line">spring.http.encoding.force&#x3D;true</span><br><span class="line">logging.config&#x3D;classpath:logback.xml</span><br><span class="line">#if this value is empty,use env value rocketmq.config.namesrvAddr  NAMESRV_ADDR | now, you can set it in ops page.default localhost:9876</span><br><span class="line">rocketmq.config.namesrvAddr&#x3D;</span><br><span class="line">#if you use rocketmq version &lt; 3.5.8, rocketmq.config.isVIPChannel should be false.default true</span><br><span class="line">rocketmq.config.isVIPChannel&#x3D;</span><br><span class="line">#rocketmq-console&#39;s data path:dashboard&#x2F;monitor</span><br><span class="line">rocketmq.config.dataPath&#x3D;&#x2F;tmp&#x2F;rocketmq-console&#x2F;data</span><br><span class="line">#set it false if you don&#39;t want use dashboard.default true</span><br><span class="line">rocketmq.config.enableDashBoardCollect&#x3D;true</span><br><span class="line">#set the message track trace topic if you don&#39;t want use the default one</span><br><span class="line">rocketmq.config.msgTrackTopicName&#x3D;</span><br><span class="line">rocketmq.config.ticketKey&#x3D;ticket</span><br><span class="line"></span><br><span class="line">#Must create userInfo file: $&#123;rocketmq.config.dataPath&#125;&#x2F;users.properties if the login is required</span><br><span class="line">rocketmq.config.loginRequired&#x3D;false</span><br></pre></td></tr></table></figure><p>如果出错的话则查看log.txt文件内容</p><h2><span id="fang-wen">访问</span><a href="#fang-wen" class="header-anchor"></a></h2><p>访问URL : <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a>  </p><p>正确启动</p>]]></content>
    
    <summary type="html">
    
      windows-Mq 启动操作
    
    </summary>
    
    
      <category term="Mq" scheme="https://zuoyoulai.github.io/categories/Mq/"/>
    
      <category term="Rocketmq" scheme="https://zuoyoulai.github.io/categories/Mq/Rocketmq/"/>
    
    
      <category term="Rocketmq" scheme="https://zuoyoulai.github.io/tags/Rocketmq/"/>
    
  </entry>
  
  <entry>
    <title>借鉴博客学习</title>
    <link href="https://zuoyoulai.github.io/2019/12/25/%E5%80%9F%E9%89%B4%E5%8D%9A%E5%AE%A2%E5%AD%A6%E4%B9%A0-md/"/>
    <id>https://zuoyoulai.github.io/2019/12/25/%E5%80%9F%E9%89%B4%E5%8D%9A%E5%AE%A2%E5%AD%A6%E4%B9%A0-md/</id>
    <published>2019-12-25T02:27:44.000Z</published>
    <updated>2020-01-08T06:28:16.159Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#you-xiu-wen-zhang-nei-rong">优秀文章内容</a><ul><li><a href="#wen-dang">文档</a></li></ul></li><li><a href="#bo-ke-nei-rong">博客内容</a></li></ul><!-- tocstop --></div><h2><span id="you-xiu-wen-zhang-nei-rong">优秀文章内容</span><a href="#you-xiu-wen-zhang-nei-rong" class="header-anchor"></a></h2><ul><li>权威文档</li><li>优秀笔记内容</li><li>个人博客<a id="more"></a></li></ul><h3><span id="wen-dang">文档</span><a href="#wen-dang" class="header-anchor"></a></h3><table><thead><tr><th>名称</th><th>Url</th></tr></thead><tbody><tr><td>go学习系列文章</td><td><a href="https://www.liwenzhou.com/categories/Golang/" target="_blank" rel="noopener">https://www.liwenzhou.com/categories/Golang/</a></td></tr><tr><td>互联网扫盲笔记</td><td><a href="https://doocs.github.io/advanced-java/#/" target="_blank" rel="noopener">https://doocs.github.io/advanced-java/#/</a></td></tr><tr><td>下载资源网盘</td><td><a href="https://m.pantianxia.com/" target="_blank" rel="noopener">https://m.pantianxia.com/</a></td></tr><tr><td>下载资源</td><td><a href="http://www.xiazaij.com/author/xiazaij/" target="_blank" rel="noopener">http://www.xiazaij.com/author/xiazaij/</a></td></tr><tr><td>zlnnjit(博客一直在持续的更新)</td><td><a href="https://www.bcoder.top/" target="_blank" rel="noopener">https://www.bcoder.top/</a></td></tr><tr><td><a href="https://jboot.io/" target="_blank" rel="noopener">jboot</a></td><td><a href="https://jboot.io/" target="_blank" rel="noopener">https://jboot.io/</a></td></tr><tr><td><a href="http://cn.linux.vbird.org/linux_basic/linux_basic.php" target="_blank" rel="noopener">鸟哥私房菜</a></td><td><a href="http://cn.linux.vbird.org/linux_basic/linux_basic.php" target="_blank" rel="noopener">http://cn.linux.vbird.org/linux_basic/linux_basic.php</a></td></tr><tr><td><a href="http://kubernetes.kansea.com/docs/hellonode/" target="_blank" rel="noopener">k8s</a></td><td><a href="http://kubernetes.kansea.com/docs/hellonode/" target="_blank" rel="noopener">http://kubernetes.kansea.com/docs/hellonode/</a></td></tr><tr><td><a href="https://vipshop.github.io/vjtools/#/standard/" target="_blank" rel="noopener">唯品会开发手册</a></td><td><a href="https://vipshop.github.io/vjtools/#/standard/" target="_blank" rel="noopener">https://vipshop.github.io/vjtools/#/standard/</a></td></tr><tr><td><a href="https://leetcode-cn.com/problemset/all/" target="_blank" rel="noopener">leecode编程算法网站</a></td><td><a href="https://leetcode-cn.com/problemset/all/" target="_blank" rel="noopener">https://leetcode-cn.com/problemset/all/</a></td></tr><tr><td><a href="http://www.xuxueli.com/page/projects.html" target="_blank" rel="noopener">许雪里开源列表</a></td><td><a href="http://www.xuxueli.com/page/projects.html" target="_blank" rel="noopener">http://www.xuxueli.com/page/projects.html</a></td></tr><tr><td><a href="https://zq99299.github.io/note-book/" target="_blank" rel="noopener">代码有毒的笔记</a></td><td><a href="https://zq99299.github.io/note-book/" target="_blank" rel="noopener">https://zq99299.github.io/note-book/</a></td></tr><tr><td><a href="http://blog.didispace.com/books/elasticsearch-definitive-guide-cn/" target="_blank" rel="noopener">ES权威指南笔记</a></td><td><a href="http://blog.didispace.com/books/elasticsearch-definitive-guide-cn/" target="_blank" rel="noopener">http://blog.didispace.com/books/elasticsearch-definitive-guide-cn/</a></td></tr><tr><td><a href="http://naotu.baidu.com/file/b49ccc722da46972dfe3a720cd414a11" target="_blank" rel="noopener">Cyc2018笔记脑图</a></td><td><a href="http://naotu.baidu.com/file/b49ccc722da46972dfe3a720cd414a11" target="_blank" rel="noopener">http://naotu.baidu.com/file/b49ccc722da46972dfe3a720cd414a11</a></td></tr><tr><td><a href="https://www.fangzhipeng.com/javainterview/2019/04/17/jvm-tools.html" target="_blank" rel="noopener">Java虚拟机：JVM性能调优监控工具jps、jstack、jmap、jhat、jstat、hprof使用详解</a></td><td><a href="https://www.fangzhipeng.com/javainterview/2019/04/17/jvm-tools.html" target="_blank" rel="noopener">https://www.fangzhipeng.com/javainterview/2019/04/17/jvm-tools.html</a></td></tr><tr><td><a href="https://segmentfault.com/a/1190000014479154?utm_source=index-hottest" target="_blank" rel="noopener">Shiro用starter方式优雅整合到SpringBoot中 比较全面的</a></td><td><a href="https://segmentfault.com/a/1190000014479154?utm_source=index-hottest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000014479154?utm_source=index-hottest</a></td></tr><tr><td>rocketMq的笔记内容</td><td><a href="https://www.bcoder.top/2017/12/17/%E4%B8%9A%E4%BD%99%E5%AD%A6%E4%B9%A0%E4%B9%8BRocketMQ%E4%B8%AD%E7%BA%A7%E7%AF%87/#%E6%B6%88%E8%B4%B9%E8%80%85%E6%B6%88%E6%81%AF%E9%87%8D%E8%AF%95" target="_blank" rel="noopener">https://www.bcoder.top/2017/12/17/%E4%B8%9A%E4%BD%99%E5%AD%A6%E4%B9%A0%E4%B9%8BRocketMQ%E4%B8%AD%E7%BA%A7%E7%AF%87/#%E6%B6%88%E8%B4%B9%E8%80%85%E6%B6%88%E6%81%AF%E9%87%8D%E8%AF%95</a></td></tr><tr><td>容器面试笔记</td><td><a href="http://www.spring4all.com/article/6786" target="_blank" rel="noopener">http://www.spring4all.com/article/6786</a></td></tr><tr><td>阿飞的博客</td><td><a href="https://www.jianshu.com/u/6779ec81d3b7" target="_blank" rel="noopener">https://www.jianshu.com/u/6779ec81d3b7</a></td></tr><tr><td>正则表达式学习</td><td><a href="http://blog.didispace.com/regular-expression-all/" target="_blank" rel="noopener">http://blog.didispace.com/regular-expression-all/</a></td></tr><tr><td>【课程】Elastic Stack入门与实践</td><td><a href="https://www.imooc.com/article/45855" target="_blank" rel="noopener">https://www.imooc.com/article/45855</a></td></tr><tr><td>【课程】Elastic Stack入门与实践 [描述的较好]</td><td><a href="https://blog.csdn.net/hiwes/article/category/8448094" target="_blank" rel="noopener">https://blog.csdn.net/hiwes/article/category/8448094</a></td></tr><tr><td>【课程】JVM笔记内容</td><td><a href="http://www.imooc.com/article/details/id/251567#param-type" target="_blank" rel="noopener">http://www.imooc.com/article/details/id/251567#param-type</a></td></tr><tr><td>jdk各个版本间docker兼容问题</td><td><a href="https://kelvinji2009.github.io/tags/docker/" target="_blank" rel="noopener">https://kelvinji2009.github.io/tags/docker/</a></td></tr><tr><td>k8s开启</td><td><a href="https://kelvinji2009.github.io/blog/kubernetes-bible-beginners/" target="_blank" rel="noopener">https://kelvinji2009.github.io/blog/kubernetes-bible-beginners/</a></td></tr><tr><td>【课程】Nginx入门到实践</td><td><a href="https://www.jianshu.com/nb/32398790" target="_blank" rel="noopener">https://www.jianshu.com/nb/32398790</a></td></tr><tr><td>【极客时间】从0开始学架构【笔记】</td><td><a href="https://zhimap.com/mhtml/6159a37f642c480e984e9ad5d97e2489" target="_blank" rel="noopener">https://zhimap.com/mhtml/6159a37f642c480e984e9ad5d97e2489</a></td></tr><tr><td>IO流读取的比较</td><td><a href="https://www.cnkirito.moe/file-io-best-practise/" target="_blank" rel="noopener">https://www.cnkirito.moe/file-io-best-practise/</a></td></tr><tr><td>使用Redis的分布式锁</td><td><a href="https://wudashan.cn/2017/10/23/Redis-Distributed-Lock-Implement/" target="_blank" rel="noopener">https://wudashan.cn/2017/10/23/Redis-Distributed-Lock-Implement/</a></td></tr></tbody></table><hr><p>##特指权威性的网站<br>名称 | Url<br>——|—–<br>elasticsearch日报 | <a href="https://elasticsearch.cn/" target="_blank" rel="noopener">https://elasticsearch.cn/</a><br>docker中文文档 | <a href="https://docs.docker-cn.com" target="_blank" rel="noopener">https://docs.docker-cn.com</a><br>docker中文论坛社区 | <a href="http://dockone.io/" target="_blank" rel="noopener">http://dockone.io/</a><br>jenkins官方的文档内容 | <a href="https://jenkins.io/zh/" target="_blank" rel="noopener">https://jenkins.io/zh/</a><br>sharding-jdbc官方中文文档 | <a href="https://shardingsphere.apache.org/document/current/cn/overview/" target="_blank" rel="noopener">https://shardingsphere.apache.org/document/current/cn/overview/</a><br>docker-file 良好的实践 | <a href="https://juejin.im/entry/5d2405be6fb9a07f091bc7f3?utm_source=gold_browser_extension" target="_blank" rel="noopener">https://juejin.im/entry/5d2405be6fb9a07f091bc7f3?utm_source=gold_browser_extension</a></p><hr><h2><span id="bo-ke-nei-rong">博客内容</span><a href="#bo-ke-nei-rong" class="header-anchor"></a></h2><table><thead><tr><th>名称</th><th>Url</th></tr></thead><tbody><tr><td><a href="https://www.cnblogs.com/relucent/p/6525821.html" target="_blank" rel="noopener">ASM获取参数</a></td><td><a href="https://www.cnblogs.com/relucent/p/6525821.html" target="_blank" rel="noopener">https://www.cnblogs.com/relucent/p/6525821.html</a></td></tr><tr><td><a href="https://blog.csdn.net/u011896537/article/details/89467774" target="_blank" rel="noopener">书籍的推荐</a></td><td><a href="https://blog.csdn.net/u011896537/article/details/89467774" target="_blank" rel="noopener">https://blog.csdn.net/u011896537/article/details/89467774</a></td></tr><tr><td>mrbird[很多java的干货]</td><td><a href="https://mrbird.cc/" target="_blank" rel="noopener">https://mrbird.cc/</a></td></tr><tr><td>[小窝小窝]</td><td><a href="https://z77z.oschina.io/" target="_blank" rel="noopener">https://z77z.oschina.io/</a></td></tr><tr><td>死磕java[文章非常的全面系统]</td><td><a href="http://cmsblogs.com/?page_id=3027" target="_blank" rel="noopener">http://cmsblogs.com/?page_id=3027</a></td></tr><tr><td>猿天地</td><td><a href="http://cxytiandi.com/article" target="_blank" rel="noopener">http://cxytiandi.com/article</a></td></tr><tr><td>周立博客[springboot + springcloud教程 书作者]</td><td><a href="http://www.itmuch.com/" target="_blank" rel="noopener">http://www.itmuch.com/</a></td></tr><tr><td>程序员DDD [springboot + springcloud教程 书作者]</td><td><a href="http://blog.didispace.com/" target="_blank" rel="noopener">http://blog.didispace.com/</a></td></tr><tr><td>方志朋[spring cloud教程]</td><td><a href="https://www.cnblogs.com/forezp/category/1327932.html" target="_blank" rel="noopener">https://www.cnblogs.com/forezp/category/1327932.html</a></td></tr><tr><td>方志朋[spring cloud + java + 架构]</td><td><a href="https://www.fangzhipeng.com" target="_blank" rel="noopener">https://www.fangzhipeng.com</a></td></tr><tr><td>纯洁的微笑[springboot + springcloud教程]</td><td><a href="http://www.ityouknow.com/" target="_blank" rel="noopener">http://www.ityouknow.com/</a></td></tr><tr><td>java知音[java基础 面试 web 各种java基础 算法]</td><td><a href="https://www.javazhiyin.com" target="_blank" rel="noopener">https://www.javazhiyin.com</a></td></tr><tr><td>匠心零度[jvm rocketmq]</td><td><a href="http://www.jiangxinlingdu.com/" target="_blank" rel="noopener">http://www.jiangxinlingdu.com/</a></td></tr><tr><td>anoyi[k8s docker-swarm 还有书籍的下载]</td><td><a href="https://anoyi.com" target="_blank" rel="noopener">https://anoyi.com</a></td></tr><tr><td>Loull[蛮坚持写博客的人 实用性还是蛮高的]</td><td><a href="https://www.cnblogs.com/549294286/" target="_blank" rel="noopener">https://www.cnblogs.com/549294286/</a></td></tr><tr><td>叶落[Nginx NIO资料不是很多]</td><td><a href="http://www.liqinghe.com/technology.html" target="_blank" rel="noopener">http://www.liqinghe.com/technology.html</a></td></tr><tr><td><a href="https://www.cnblogs.com/hujunzheng" target="_blank" rel="noopener">技术栈蛮深,涉略spring redis boot</a></td><td><a href="https://www.cnblogs.com/hujunzheng" target="_blank" rel="noopener">https://www.cnblogs.com/hujunzheng</a></td></tr><tr><td><a href="https://segmentfault.com/blog/die4zhe" target="_blank" rel="noopener">不折腾会死 (shiro 文章可能较少)</a></td><td><a href="https://segmentfault.com/blog/die4zhe" target="_blank" rel="noopener">https://segmentfault.com/blog/die4zhe</a></td></tr><tr><td>[阿里数据库内核主管]</td><td><a href="http://hedengcheng.com/?p=771" target="_blank" rel="noopener">http://hedengcheng.com/?p=771</a></td></tr><tr><td>[core java]</td><td><a href="http://www.carlzone.cn" target="_blank" rel="noopener">http://www.carlzone.cn</a></td></tr><tr><td>[数据结构]</td><td><a href="http://timd.cn" target="_blank" rel="noopener">http://timd.cn</a></td></tr><tr><td>[架构分布式]</td><td><a href="http://www.kailing.pub" target="_blank" rel="noopener">http://www.kailing.pub</a></td></tr><tr><td>[一个未毕业却很努力却很强技术栈学生]</td><td><a href="https://www.cnblogs.com/yueshutong/" target="_blank" rel="noopener">https://www.cnblogs.com/yueshutong/</a></td></tr><tr><td>[java 高级知识点：rocketmq 分布式事务 分布式锁]</td><td><a href="https://www.jianshu.com/u/bbe9e62bc5ba" target="_blank" rel="noopener">https://www.jianshu.com/u/bbe9e62bc5ba</a></td></tr><tr><td>spring4all</td><td><a href="http://www.spring4all.com/" target="_blank" rel="noopener">http://www.spring4all.com/</a></td></tr><tr><td>Hollis</td><td><a href="https://www.hollischuang.com/" target="_blank" rel="noopener">https://www.hollischuang.com/</a></td></tr><tr><td>梁桂钊</td><td><a href="http://blog.720ui.com/columns/springboot_all/" target="_blank" rel="noopener">http://blog.720ui.com/columns/springboot_all/</a></td></tr><tr><td>码小猪</td><td><a href="https://www.hchstudio.cn" target="_blank" rel="noopener">https://www.hchstudio.cn</a></td></tr><tr><td>若鱼</td><td><a href="https://blog.csdn.net/goldenfish1919" target="_blank" rel="noopener">https://blog.csdn.net/goldenfish1919</a></td></tr><tr><td>许雪里</td><td><a href="http://www.xuxueli.com/blog/#/?id=%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80" target="_blank" rel="noopener">http://www.xuxueli.com/blog/#/?id=%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80</a></td></tr><tr><td>py教师+容器化视频的讲师</td><td><a href="http://www.imooc.com/t/5634820" target="_blank" rel="noopener">http://www.imooc.com/t/5634820</a></td></tr><tr><td>代码有毒</td><td><a href="https://blog.csdn.net/mr_zhuqiang" target="_blank" rel="noopener">https://blog.csdn.net/mr_zhuqiang</a></td></tr><tr><td>屈定</td><td><a href="https://mrdear.cn/" target="_blank" rel="noopener">https://mrdear.cn/</a></td></tr><tr><td>吾爱程序员</td><td><a href="https://www.52programer.com/" target="_blank" rel="noopener">https://www.52programer.com/</a></td></tr><tr><td>代码有毒的笔记博客</td><td><a href="https://zq99299.github.io/note-book/" target="_blank" rel="noopener">https://zq99299.github.io/note-book/</a></td></tr><tr><td>代码有毒的CSDN</td><td><a href="https://blog.csdn.net/mr_zhuqiang" target="_blank" rel="noopener">https://blog.csdn.net/mr_zhuqiang</a></td></tr><tr><td>kelvinji2009[很牛的人]</td><td><a href="https://kelvinji2009.github.io/" target="_blank" rel="noopener">https://kelvinji2009.github.io/</a></td></tr><tr><td>运维的笔记</td><td><a href="http://www.zsythink.net/" target="_blank" rel="noopener">http://www.zsythink.net/</a></td></tr><tr><td>技术颜良[文章很有水准]</td><td><a href="https://www.cnblogs.com/cheyunhua/p/?page=32" target="_blank" rel="noopener">https://www.cnblogs.com/cheyunhua/p/?page=32</a></td></tr><tr><td>Java知识分享[下载pdf文章]</td><td><a href="http://www.java1234.com/" target="_blank" rel="noopener">http://www.java1234.com/</a></td></tr><tr><td>芋道源码[各种java源码解析]</td><td><a href="http://www.iocoder.cn/" target="_blank" rel="noopener">http://www.iocoder.cn/</a></td></tr><tr><td><a href="https://www.jianshu.com/u/d00590abcb80" target="_blank" rel="noopener">空挡 网络 rocketmq</a></td><td><a href="https://www.jianshu.com/u/d00590abcb80" target="_blank" rel="noopener">https://www.jianshu.com/u/d00590abcb80</a></td></tr><tr><td>[es springboot flink]</td><td><a href="http://www.54tianzhisheng.cn" target="_blank" rel="noopener">http://www.54tianzhisheng.cn</a></td></tr><tr><td>架构研究</td><td><a href="http://www.shinians.com/html/blog.html" target="_blank" rel="noopener">http://www.shinians.com/html/blog.html</a></td></tr><tr><td>人工智能</td><td><a href="https://www.captainbed.net/mengday/" target="_blank" rel="noopener">https://www.captainbed.net/mengday/</a></td></tr><tr><td>Hexo博客安装</td><td><a href="https://y0ngb1n.github.io/" target="_blank" rel="noopener">https://y0ngb1n.github.io/</a></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      借鉴Github,博客学习
    
    </summary>
    
    
      <category term="学习文章" scheme="https://zuoyoulai.github.io/categories/%E5%AD%A6%E4%B9%A0%E6%96%87%E7%AB%A0/"/>
    
    
      <category term="学习文章" scheme="https://zuoyoulai.github.io/tags/%E5%AD%A6%E4%B9%A0%E6%96%87%E7%AB%A0/"/>
    
      <category term="GitHub" scheme="https://zuoyoulai.github.io/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>我的 Hexo 博客系统的搭建</title>
    <link href="https://zuoyoulai.github.io/2019/12/24/hexo-study-md/"/>
    <id>https://zuoyoulai.github.io/2019/12/24/hexo-study-md/</id>
    <published>2019-12-24T15:50:00.000Z</published>
    <updated>2019-12-29T16:40:03.229Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#da-jian-ge-ren-bo-ke-zhan-dian">搭建个人博客站点</a></li><li><a href="#mac-huan-jing-xi-tong-da-jian-bo-ke">Mac 环境系统搭建博客</a></li><li><a href="#linux-huan-jing-xi-tong-da-jian-bo-ke">Linux 环境系统搭建博客</a></li><li><a href="#git-fa-bu-de-cha-jian">git 发布的插件</a></li><li><a href="#tian-jia-hexo-wen-zhang-mu-lu-cha-jian">添加 hexo 文章目录插件</a></li></ul><!-- tocstop --></div>### 搭建个人博客站点+ 本地 Linux 需要安装 : Git+ 本地 Mac 安装 node ：https://nodejs.org/en/download/<h3><span id="mac-huan-jing-xi-tong-da-jian-bo-ke">Mac 环境系统搭建博客</span><a href="#mac-huan-jing-xi-tong-da-jian-bo-ke" class="header-anchor"></a></h3><ul><li>mac 安装 node 权限的问题,解决问题链接：<a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally" target="_blank" rel="noopener">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">会出现 root 与 本地用户操作权限的问题，如：npm install -g xxx 操作的</span><br><span class="line">需要做出如下操作:</span><br><span class="line">&gt;&gt; mkdir ~&#x2F;.npm-global</span><br><span class="line">&gt;&gt; npm config set prefix &#39;~&#x2F;.npm-global&#39;</span><br><span class="line">&gt;&gt; vim ~&#x2F;.bash_profile</span><br><span class="line"></span><br><span class="line">添加如下：</span><br><span class="line">export PATH&#x3D;&#x2F;Users&#x2F;haodalai&#x2F;.npm-global&#x2F;bin:$PATH</span><br><span class="line">export PATH&#x3D;&#x2F;Users&#x2F;haodalai&#x2F;Blog&#x2F;node_modules&#x2F;.bin:$PATH</span><br><span class="line"></span><br><span class="line">&gt;&gt; echo $PATH</span><br><span class="line">&gt;&gt; source ~&#x2F;.bash_profile </span><br><span class="line">&gt;&gt; npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org （测试是 ok 的）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mac 安装 hexo：</span><br><span class="line">路径设置：</span><br><span class="line">&gt;&gt; export PATH&#x3D;~&#x2F;Blog&#x2F;node_modules&#x2F;.bin:$PATH</span><br><span class="line">&gt;&gt; echo $PATH</span><br><span class="line">&gt;&gt; hexo （测试生效）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">新建一个hexo 项目</span><br><span class="line">&gt;&gt; mkdir ~&#x2F;Blog&#x2F;Samlai-Blog</span><br><span class="line">&gt;&gt; hexo init ~&#x2F;Blog&#x2F;Samlai-Blog</span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure><hr><h3><span id="linux-huan-jing-xi-tong-da-jian-bo-ke">Linux 环境系统搭建博客</span><a href="#linux-huan-jing-xi-tong-da-jian-bo-ke" class="header-anchor"></a></h3><ul><li>Linux 参考 Hexo 文档来进行搭建博客站点： <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1. 安装 nodejs</span><br><span class="line">   使用这种方式来安装 : Linux（DEB&#x2F;RPM-based）：从 NodeSource 安装</span><br><span class="line">   参考链接 ： https:&#x2F;&#x2F;github.com&#x2F;nodesource&#x2F;distributions</span><br><span class="line">   因为本地是 centos 执行指令 :</span><br><span class="line">   </span><br><span class="line">   &gt;&gt; curl -sL https:&#x2F;&#x2F;rpm.nodesource.com&#x2F;setup_12.x | bash -</span><br><span class="line">   </span><br><span class="line">   执行完成后:</span><br><span class="line">   </span><br><span class="line">   &gt;&gt; sudo yum install -y nodejs</span><br><span class="line">   </span><br><span class="line">2. 使用淘宝镜像 cnpm :</span><br><span class="line">   &gt;&gt; npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br><span class="line">   </span><br><span class="line">3. 使用 npm 安装 hexo:</span><br><span class="line">   &gt;&gt; cnpm install hexo</span><br><span class="line">   </span><br><span class="line">4. 将 Hexo 所在的目录下的 node_modules 添加到环境变量之中即可直接使用 hexo &lt;command&gt;：</span><br><span class="line">   &gt;&gt; echo &#39;PATH&#x3D;&quot;$PATH:&#x2F;opt&#x2F;hexo&#x2F;node_modules&#x2F;.bin&quot;&#39; &gt;&gt; ~&#x2F;.profile</span><br><span class="line">   </span><br><span class="line">   注意: 我安装hexo 目录到我的系统路径为 :  &#x2F;opt&#x2F;hexo</span><br><span class="line">   </span><br><span class="line">   执行上面没有效果的话，无法识别 hexo 指令的话，则可以直接修改 ： vim &#x2F;etc&#x2F;profile 文件</span><br><span class="line">   文件最后面写上:</span><br><span class="line">    HEXO_HOME&#x3D;&#x2F;opt&#x2F;hexo&#x2F;node_modules&#x2F;.bin</span><br><span class="line">    PATH&#x3D;$PATH:$HEXO_HOME</span><br></pre></td></tr></table></figure></li></ul><h4><span id="shi-yong-hexo-chuang-jian-xiang-mu">使用 HEXO 创建项目</span><a href="#shi-yong-hexo-chuang-jian-xiang-mu" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 初始化 hexo 项目</span><br><span class="line">hexo init &#x2F;opt&#x2F;blog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 生成静态文件</span><br><span class="line">hexo generate</span><br><span class="line"></span><br><span class="line">3.运行服务器</span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line">4.创建文件内容</span><br><span class="line">hexo new post 借鉴博客学习.md</span><br></pre></td></tr></table></figure><h4><span id="xiu-gai-hexo-de-zhu-ti-yu-fa-bu">修改 hexo 的主题与发布</span><a href="#xiu-gai-hexo-de-zhu-ti-yu-fa-bu" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 注册一个 githhub 账号 并建一个名称为： xxx(你的 github 账号).github.io 项目</span><br><span class="line"></span><br><span class="line">2. 在服务新建一个github ssh key:</span><br><span class="line">    1.yum install ssh</span><br><span class="line">    2.ssh-keygen -t rsa -C &quot;472023527@qq.com&quot;</span><br><span class="line">    3.cat ~&#x2F;.ssh&#x2F;id_rsa.pub  [复制粘贴到github头像那边的setting再进行添加相应的key值]</span><br><span class="line">    4.以后进行git操作的代码的时候则不是git https:&#x2F;&#x2F;xxx的方式</span><br><span class="line">5.创建全局的 git 账号: [hexo d 执行的时候会报错]</span><br><span class="line">git config --global user.email &quot;472023527@qq.com&quot;</span><br><span class="line">      git config --global user.name &quot;samlai&quot;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">3. 拉取主题内容:</span><br><span class="line">   cd &#x2F;opt&#x2F;blog</span><br><span class="line">   git clone https:&#x2F;&#x2F;github.com&#x2F;litten&#x2F;hexo-theme-yilia.git themes&#x2F;yilia</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">   </span><br><span class="line">4. 修改 hexo 的发布的方式：</span><br><span class="line"> vim _config.yml</span><br><span class="line"> </span><br><span class="line"> 修改发布方式:</span><br><span class="line">  deploy:</span><br><span class="line">      type: git</span><br><span class="line">      repository: git@github.com:ZuoYouLai&#x2F;ZuoYouLai.github.io.git</span><br><span class="line">      branch: master</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   修改主题内容：</span><br><span class="line">    themes: yilia</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line"> 5. 安装 hexo 的 git 插件  : cnpm install hexo-deployer-git --save</span><br><span class="line"> </span><br><span class="line"> 6. 执行 hexo 发布执行操作：</span><br><span class="line">   hexo d  (hexo deploy)</span><br><span class="line">   hexo s  (hexo server)</span><br></pre></td></tr></table></figure><h4><span id="hexo-yu-github-io-gong-tong-de-fa-bu-cao-zuo">hexo 与 github.io 共同的发布操作</span><a href="#hexo-yu-github-io-gong-tong-de-fa-bu-cao-zuo" class="header-anchor"></a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">github.io 的文件都是为：本地执行 hexo d 指令编译成静态文件然后并上传到 github.io 的仓库中.所以可以访问 https:&#x2F;&#x2F;zuoyoulai.github.io&#x2F; 可以直接访问静态文件 html 内容</span><br><span class="line"></span><br><span class="line">项目的保存最好存 md 文件的 github 的仓库的，每次写完自己新的笔记 md 文件后，提交github 仓库为了备份 md 文件内容。</span><br><span class="line"></span><br><span class="line">保存好 md 文件后再在本地执行：hexo -d 【编译好静态文件并上传到 github.io 的仓库上】</span><br></pre></td></tr></table></figure><h3><span id="git-fa-bu-de-cha-jian">git 发布的插件</span><a href="#git-fa-bu-de-cha-jian" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3><span id="tian-jia-hexo-wen-zhang-mu-lu-cha-jian">添加 hexo 文章目录插件</span><a href="#tian-jia-hexo-wen-zhang-mu-lu-cha-jian" class="header-anchor"></a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-toc --save</span><br><span class="line"></span><br><span class="line">在文章标题下添加：</span><br><span class="line">&lt;!-- toc --&gt;</span><br></pre></td></tr></table></figure><h4><span id="ben-wen-can-kao">本文参考</span><a href="#ben-wen-can-kao" class="header-anchor"></a></h4><ul><li><a href="https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html" target="_blank" rel="noopener">https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html</a></li><li><a href="https://www.jianshu.com/p/1bcad7700c46" target="_blank" rel="noopener">https://www.jianshu.com/p/1bcad7700c46</a></li></ul>]]></content>
    
    <summary type="html">
    
      Hexo 个人博客系统的搭建
    
    </summary>
    
    
      <category term="Hexo" scheme="https://zuoyoulai.github.io/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://zuoyoulai.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
